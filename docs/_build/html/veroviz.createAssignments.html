
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>veroviz.createAssignments module &#8212; veroviz 0.3.0 documentation</title>
    <link rel="stylesheet" href="_static/lglb-sphinx-doc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="veroviz.createCesium module" href="veroviz.createCesium.html" />
    <link rel="prev" title="modules" href="modules.html" /> 
  </head><body>
<div class="header">
 <p class="logo"><a href="https://veroviz.org">
  <img class="logo" src="_static/optimator_lab_transparency_small.png" alt="Logo"/>
 </a></p>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="veroviz.createCesium.html" title="veroviz.createCesium module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="modules.html" title="modules"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">veroviz 0.3.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="modules.html" accesskey="U">modules</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="modules.html"
                        title="previous chapter">modules</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="veroviz.createCesium.html"
                        title="next chapter">veroviz.createCesium module</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/veroviz.createAssignments.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-veroviz.createAssignments">
<span id="veroviz-createassignments-module"></span><h1>veroviz.createAssignments module<a class="headerlink" href="#module-veroviz.createAssignments" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="veroviz.createAssignments.addAssignment2D">
<code class="sig-name descname">addAssignment2D</code><span class="sig-paren">(</span><em class="sig-param">initAssignments=None</em>, <em class="sig-param">odID=1</em>, <em class="sig-param">objectID=None</em>, <em class="sig-param">modelFile=None</em>, <em class="sig-param">startLoc=None</em>, <em class="sig-param">endLoc=None</em>, <em class="sig-param">startTimeSec=0.0</em>, <em class="sig-param">expDurationSec=None</em>, <em class="sig-param">routeType='euclidean2D'</em>, <em class="sig-param">speedMPS=None</em>, <em class="sig-param">leafletColor='orange'</em>, <em class="sig-param">leafletWeight=3</em>, <em class="sig-param">leafletStyle='solid'</em>, <em class="sig-param">leafletOpacity=0.8</em>, <em class="sig-param">useArrows=True</em>, <em class="sig-param">modelScale=100</em>, <em class="sig-param">modelMinPxSize=75</em>, <em class="sig-param">cesiumColor='Cesium.Color.ORANGE'</em>, <em class="sig-param">cesiumWeight=3</em>, <em class="sig-param">cesiumStyle='solid'</em>, <em class="sig-param">cesiumOpacity=0.8</em>, <em class="sig-param">dataProvider=None</em>, <em class="sig-param">dataProviderArgs=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/veroviz/createAssignments.html#addAssignment2D"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#veroviz.createAssignments.addAssignment2D" title="Permalink to this definition">¶</a></dt>
<dd><p>This function appends to an existing <a class="reference internal" href="assignments.html#assignments"><span class="std std-ref">Assignments</span></a> dataframe, or creates a new <a class="reference internal" href="assignments.html#assignments"><span class="std std-ref">Assignments</span></a> dataframe if <cite>initAssignments</cite> is None.  The new rows in this dataframe describe all of the “shapepoints” between between given starting and ending locations, including timestamps indicating the departure and arrival times for each shapepoint. Shapepoints are pairs of GPS coordinates that are connected by straight lines.  For a given origin and destination, numerous individual shapepoints can be combined to define a travel route along a road network.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is for vehicles traveling on a ground plane (2-dimensional).  For vehicles requiring an altitude component (e.g., drones), a 3D version of this function is provided by <cite>addAssignment3D()</cite>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>initAssignments</strong> (<a class="reference internal" href="assignments.html#assignments"><span class="std std-ref">Assignments</span></a> dataframe, Optional, default as None) – If provided, the function will append this dataframe.</p></li>
<li><p><strong>odID</strong> (<em>int</em><em>, </em><em>Optional</em><em>, </em><em>default as 1</em>) – This field allows grouping of dataframe rows according to common origin/destination pairs.  Arc segments which are part of the same origin/destination share the same odID.</p></li>
<li><p><strong>objectID</strong> (<em>int/string</em><em>, </em><em>Optional</em><em>, </em><em>default as None</em>) – A descriptive name or index for a particular vehicle or object (e.g., ‘truck 1’, or ‘red car’).</p></li>
<li><p><strong>modelFile</strong> (<em>string</em><em>, </em><em>Optional</em><em>, </em><em>default as None</em>) – The relative path and filename of the 3D model associated with this object.  The 3D model, typically in the format of <cite>.gltf</cite> or <cite>.glb</cite>, will be visualized in Cesium.  The path should be relative to the directory where Cesium is installed (i.e., the <cite>modelFile</cite> should exist within the Cesium root directory).</p></li>
<li><p><strong>startLoc</strong> (<em>list</em><em>, </em><em>Required</em><em>, </em><em>default as None</em>) – The starting location, expressed as either [lat, lon, alt] or [lat, lon]. If no altitude is provided, it will be assumed to be 0 meters above ground level.</p></li>
<li><p><strong>endLoc</strong> (<em>list</em><em>, </em><em>Required</em><em>, </em><em>default as None</em>) – The ending location, expressed as either [lat, lon, alt] or [lat, lon]. If no altitude is provided, it will be assumed to be 0 meters above ground level.</p></li>
<li><p><strong>startTimeSec</strong> (<em>float</em><em>, </em><em>Optional</em><em>, </em><em>default as 0.0</em>) – The time, in seconds, at which the vehicle may leave the starting location.</p></li>
<li><p><strong>expDurationSec</strong> (<em>float</em><em>, </em><em>Optional</em><em>, </em><em>default as None</em>) – This is the number of seconds we expect to travel from the start to the end location. This value typically comes from the traval time matrix (see the getTimeDist functions).  Including an expected duration will help keep these two values in alignment.  If necessary, travel times for the individual shapepoints will be redistributed.</p></li>
<li><p><strong>routeType</strong> (<em>string</em><em>, </em><em>Optional</em><em>, </em><em>default as 'euclidean2D'</em>) – This describes a characteristic of the travel mode.  Possible values are: ‘euclidean2D’, ‘manhattan’, ‘fastest’, ‘shortest’, ‘pedestrian’, ‘cycling’, and ‘truck’.  The ‘euclidean2D’ and ‘manhattan’ options are calculated directly from GPS coordinates, without a road network.  Neither of these two options require a data provider.  However, the other options rely on road network information and require a data provider.  Furthermore, some of those other options are not supported by all data providers.  See <a class="reference internal" href="dataproviders.html#data-providers"><span class="std std-ref">Data Providers</span></a> for details.</p></li>
<li><p><strong>speedMPS</strong> (<em>float</em><em>, </em><em>Conditional</em><em>, </em><em>default as None</em>) – Speed of the vehicle, in units of meters per second. For route types that are not road-network based (i.e., ‘euclidean2D’ and ‘manhattan’), this field is required to calculate travel times. Otherwise, if a route type already incorporates travel speeds from road network data, (i.e., ‘fastest’, ‘shortest’, and ‘pedestrain’), this input argument may be ignored.  If provided, <cite>speedMPS</cite> will override travel speed data used by the route type option.</p></li>
<li><p><strong>leafletColor</strong> (<em>string</em><em>, </em><em>Optional</em><em>, </em><em>default as &quot;orange&quot;</em>) – The color of the route when displayed in Leaflet.  See <a class="reference internal" href="leaflet_style.html#leaflet-style"><span class="std std-ref">Leaflet Style</span></a> for a list of available colors.</p></li>
<li><p><strong>leafletWeight</strong> (<em>int</em><em>, </em><em>Optional</em><em>, </em><em>default as 3</em>) – The pixel width of the route when displayed in Leaflet.</p></li>
<li><p><strong>leafletStyle</strong> (<em>string</em><em>, </em><em>Optional</em><em>, </em><em>default as 'solid'</em>) – The line style of the route when displayed in Leaflet.  Valid options are ‘solid’, ‘dotted’, and ‘dashed’. See <a class="reference internal" href="leaflet_style.html#leaflet-style"><span class="std std-ref">Leaflet Style</span></a> for more information.</p></li>
<li><p><strong>leafletOpacity</strong> (<em>float in</em><em> [</em><em>0</em><em>, </em><em>1</em><em>]</em><em>, </em><em>Optional</em><em>, </em><em>default as 0.8</em>) – The opacity of the route when displayed in Leaflet. Valid values are in the range from 0 (invisible) to 1 (no transparency).</p></li>
<li><p><strong>useArrows</strong> (<em>bool</em><em>, </em><em>Optional</em><em>, </em><em>default as True</em>) – Indicates whether arrows should be shown on the route when displayed in Leaflet.</p></li>
<li><p><strong>modelScale</strong> (<em>int</em><em>, </em><em>Optional</em><em>, </em><em>default as 100</em>) – The scale of the 3D model (specified by the <cite>modelFile</cite> argument) when displayed in Cesium, such that 100 represents 100%.</p></li>
<li><p><strong>modelMinPxSize</strong> (<em>int</em><em>, </em><em>Optional</em><em>, </em><em>default as 75</em>) – The minimum pixel size of the 3D model (specified by the <cite>modelFile</cite> argument) when displayed in Cesium.  When zooming out, the model will not be smaller than this size; zooming in can result in a larger model.</p></li>
<li><p><strong>cesiumColor</strong> (<em>string</em><em>, </em><em>Optional</em><em>, </em><em>default as &quot;Cesium.Color.ORANGE&quot;</em>) – The color of the route when displayed in Cesium.  See <a class="reference internal" href="cesium_style.html#cesium-style"><span class="std std-ref">Cesium Style</span></a> for a list of available colors.</p></li>
<li><p><strong>cesiumWeight</strong> (<em>int</em><em>, </em><em>Optional</em><em>, </em><em>default as 3</em>) – The pixel width of the route when displayed in Cesium.</p></li>
<li><p><strong>cesiumStyle</strong> (<em>string</em><em>, </em><em>Optional</em><em>, </em><em>default as 'solid'</em>) – The line style of the route when displayed in Cesium.  Valid options are ‘solid’, ‘dotted’, and ‘dashed’. See <a class="reference internal" href="cesium_style.html#cesium-style"><span class="std std-ref">Cesium Style</span></a> for more information.</p></li>
<li><p><strong>cesiumOpacity</strong> (<em>float in</em><em> [</em><em>0</em><em>, </em><em>1</em><em>]</em><em>, </em><em>Optional</em><em>, </em><em>default as 0.8</em>) – The opacity of the route when displayed in Cesium. Valid values are in the range from 0 (invisible) to 1 (no transparency).</p></li>
<li><p><strong>dataProvider</strong> (<em>string</em><em>, </em><em>Conditional</em><em>, </em><em>default as None</em>) – Specifies the data source to be used for obtaining the shapepoints. See <a class="reference internal" href="dataproviders.html#data-providers"><span class="std std-ref">Data Providers</span></a> for options and requirements.</p></li>
<li><p><strong>dataProviderArgs</strong> (<em>dictionary</em><em>, </em><em>Conditional</em><em>, </em><em>default as None</em>) – For some data providers, additional parameters are required (e.g., API keys or database names). See <a class="reference internal" href="dataproviders.html#data-providers"><span class="std std-ref">Data Providers</span></a> for the additional arguments required for each supported data provider.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="assignments.html#assignments"><span class="std std-ref">Assignments</span></a> dataframe – An <a class="reference internal" href="assignments.html#assignments"><span class="std std-ref">Assignments</span></a> dataframe containing an ordered sequence of paired GPS coordinates describing the collection of straight-line segments required to travel from a start location to an end location.</p></li>
<li><p><strong>endTimeSec</strong> (<em>float</em>) – The time, in seconds, at which the end location is reached.</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<dl>
<dt>Import veroviz and check if it’s the latest version:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">veroviz</span> <span class="k">as</span> <span class="nn">vrv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vrv</span><span class="o">.</span><span class="n">checkVersion</span><span class="p">()</span>
</pre></div>
</div>
</dd>
<dt>Define 5 node locations, as [lat, lon] pairs:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">locs</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">42.8871085</span><span class="p">,</span> <span class="o">-</span><span class="mf">78.8731949</span><span class="p">],</span>
<span class="gp">... </span>        <span class="p">[</span><span class="mf">42.8888311</span><span class="p">,</span> <span class="o">-</span><span class="mf">78.8649649</span><span class="p">],</span>
<span class="gp">... </span>        <span class="p">[</span><span class="mf">42.8802158</span><span class="p">,</span> <span class="o">-</span><span class="mf">78.8660787</span><span class="p">],</span>
<span class="gp">... </span>        <span class="p">[</span><span class="mf">42.8845705</span><span class="p">,</span> <span class="o">-</span><span class="mf">78.8762794</span><span class="p">],</span>
<span class="gp">... </span>        <span class="p">[</span><span class="mf">42.8908031</span><span class="p">,</span> <span class="o">-</span><span class="mf">78.8770140</span><span class="p">]]</span>
</pre></div>
</div>
</dd>
<dt>Generate a nodes dataframe from these locations:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">myNodes</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">createNodesFromLocs</span><span class="p">(</span><span class="n">locs</span><span class="o">=</span><span class="n">locs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myNodes</span>
</pre></div>
</div>
</dd>
<dt>View these nodes on a map:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">vrv</span><span class="o">.</span><span class="n">createLeaflet</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="n">myNodes</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>We’re going to hard-code a solution.</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># A car will start at node 1, visit nodes 2 and 3, and then return to node 1.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># A truck will follow a route from 1-&gt;5-&gt;4-&gt;1.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mySolution</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s1">&#39;car&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">]],</span>
<span class="gp">... </span>    <span class="s1">&#39;truck&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>Define some information about our 2 vehicles, for later use:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">vehicleProperties</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s1">&#39;car&#39;</span><span class="p">:</span>   <span class="p">{</span><span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="s1">&#39;veroviz/models/car_red.gltf&#39;</span><span class="p">,</span>
<span class="gp">... </span>              <span class="s1">&#39;leafletColor&#39;</span><span class="p">:</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span>
<span class="gp">... </span>              <span class="s1">&#39;cesiumColor&#39;</span><span class="p">:</span> <span class="s1">&#39;Cesium.Color.RED&#39;</span><span class="p">},</span>
<span class="gp">... </span>    <span class="s1">&#39;truck&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="s1">&#39;veroviz/models/ub_truck.gltf&#39;</span><span class="p">,</span>
<span class="gp">... </span>              <span class="s1">&#39;leafletColor&#39;</span><span class="p">:</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span>
<span class="gp">... </span>              <span class="s1">&#39;cesiumColor&#39;</span><span class="p">:</span> <span class="s1">&#39;Cesium.Color.BLUE&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>The following examples assume the use of ORS as the data provider. If you have saved your API key as an environment variable, you may use <cite>os.environ</cite> to access it:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ORS_API_KEY</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;ORSKEY&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Otherwise, you may specify your key here:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># ORS_API_KEY = &#39;YOUR_ORS_KEY_GOES_HERE&#39;</span>
</pre></div>
</div>
</dd>
<dt>Example 1 – The vehicles will visit the nodes in their routes, without any service times. Assume Euclidean travel (ignoring the road network).</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Build the assignments dataframe for the 2 vehicle routes.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># No service times, Euclidean travel:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myAssignments</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">initDataframe</span><span class="p">(</span><span class="s1">&#39;assignments&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">mySolution</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">endTimeSec</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">arc</span> <span class="ow">in</span> <span class="n">mySolution</span><span class="p">[</span><span class="n">v</span><span class="p">]:</span>
<span class="gp">... </span>        <span class="p">[</span><span class="n">myAssignments</span><span class="p">,</span> <span class="n">endTimeSec</span><span class="p">]</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">addAssignment2D</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">initAssignments</span> <span class="o">=</span> <span class="n">myAssignments</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">objectID</span>        <span class="o">=</span> <span class="n">v</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">modelFile</span>       <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="s1">&#39;model&#39;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="n">startLoc</span>        <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myNodes</span><span class="p">[</span><span class="n">myNodes</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arc</span><span class="p">[</span><span class="mi">0</span><span class="p">]][[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="gp">... </span>            <span class="n">endLoc</span>          <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myNodes</span><span class="p">[</span><span class="n">myNodes</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">]][[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="gp">... </span>            <span class="n">startTimeSec</span>    <span class="o">=</span> <span class="n">endTimeSec</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">routeType</span>       <span class="o">=</span> <span class="s1">&#39;euclidean2D&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">speedMPS</span>        <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">convertSpeed</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="s1">&#39;miles&#39;</span><span class="p">,</span> <span class="s1">&#39;hour&#39;</span><span class="p">,</span> <span class="s1">&#39;meters&#39;</span><span class="p">,</span> <span class="s1">&#39;second&#39;</span><span class="p">),</span>
<span class="gp">... </span>            <span class="n">leafletColor</span>    <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="s1">&#39;leafletColor&#39;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="n">cesiumColor</span>     <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="s1">&#39;cesiumColor&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myAssignments</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Show the routes (and nodes) on a map:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vrv</span><span class="o">.</span><span class="n">createLeaflet</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="n">myNodes</span><span class="p">,</span> <span class="n">arcs</span><span class="o">=</span><span class="n">myAssignments</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>Example 2 – The vehicles will now travel on the road network, but we’ll still ignore service times.</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># No service times, Travel on road network:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myAssignments</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">initDataframe</span><span class="p">(</span><span class="s1">&#39;assignments&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">mySolution</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">endTimeSec</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">arc</span> <span class="ow">in</span> <span class="n">mySolution</span><span class="p">[</span><span class="n">v</span><span class="p">]:</span>
<span class="gp">... </span>        <span class="p">[</span><span class="n">myAssignments</span><span class="p">,</span> <span class="n">endTimeSec</span><span class="p">]</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">addAssignment2D</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">initAssignments</span>  <span class="o">=</span> <span class="n">myAssignments</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">objectID</span>         <span class="o">=</span> <span class="n">v</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">modelFile</span>        <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="s1">&#39;model&#39;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="n">startLoc</span>         <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myNodes</span><span class="p">[</span><span class="n">myNodes</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arc</span><span class="p">[</span><span class="mi">0</span><span class="p">]][[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="gp">... </span>            <span class="n">endLoc</span>           <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myNodes</span><span class="p">[</span><span class="n">myNodes</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">]][[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="gp">... </span>            <span class="n">startTimeSec</span>     <span class="o">=</span> <span class="n">endTimeSec</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">leafletColor</span>     <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="s1">&#39;leafletColor&#39;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="n">cesiumColor</span>      <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="s1">&#39;cesiumColor&#39;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="n">routeType</span>        <span class="o">=</span> <span class="s1">&#39;fastest&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">dataProvider</span>     <span class="o">=</span> <span class="s1">&#39;ORS-online&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">dataProviderArgs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;APIkey&#39;</span><span class="p">:</span> <span class="n">ORS_API_KEY</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myAssignments</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Show the routes (and nodes) on a map:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vrv</span><span class="o">.</span><span class="n">createLeaflet</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="n">myNodes</span><span class="p">,</span> <span class="n">arcs</span><span class="o">=</span><span class="n">myAssignments</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>Example 3 – The vehicles are still following the road network, but now we’ll force them to match the travel times specified in a travel matrix.</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># We&#39;ll first create the travel time and distance matrices:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">timeSec</span><span class="p">,</span> <span class="n">distMeters</span><span class="p">]</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">getTimeDist2D</span><span class="p">(</span><span class="n">nodes</span>            <span class="o">=</span> <span class="n">myNodes</span><span class="p">,</span>
<span class="gp">... </span>                                          <span class="n">routeType</span>        <span class="o">=</span> <span class="s1">&#39;fastest&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                          <span class="n">dataProvider</span>     <span class="o">=</span> <span class="s1">&#39;ORS-online&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                          <span class="n">dataProviderArgs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;APIkey&#39;</span><span class="p">:</span> <span class="n">ORS_API_KEY</span><span class="p">})</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># No service times, Travel on road network, use travel times from the distance matrix:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># added &quot;expDurationSec&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myAssignments</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">initDataframe</span><span class="p">(</span><span class="s1">&#39;assignments&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">mySolution</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">endTimeSec</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">arc</span> <span class="ow">in</span> <span class="n">mySolution</span><span class="p">[</span><span class="n">v</span><span class="p">]:</span>
<span class="gp">... </span>        <span class="p">[</span><span class="n">myAssignments</span><span class="p">,</span> <span class="n">endTimeSec</span><span class="p">]</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">addAssignment2D</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">initAssignments</span>  <span class="o">=</span> <span class="n">myAssignments</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">objectID</span>         <span class="o">=</span> <span class="n">v</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">modelFile</span>        <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="s1">&#39;model&#39;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="n">startLoc</span>         <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myNodes</span><span class="p">[</span><span class="n">myNodes</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arc</span><span class="p">[</span><span class="mi">0</span><span class="p">]][[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="gp">... </span>            <span class="n">endLoc</span>           <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myNodes</span><span class="p">[</span><span class="n">myNodes</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">]][[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="gp">... </span>            <span class="n">startTimeSec</span>     <span class="o">=</span> <span class="n">endTimeSec</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">expDurationSec</span>   <span class="o">=</span> <span class="n">timeSec</span><span class="p">[</span><span class="n">arc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
<span class="gp">... </span>            <span class="n">leafletColor</span>     <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="s1">&#39;leafletColor&#39;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="n">cesiumColor</span>      <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="s1">&#39;cesiumColor&#39;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="n">routeType</span>        <span class="o">=</span> <span class="s1">&#39;fastest&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">dataProvider</span>     <span class="o">=</span> <span class="s1">&#39;ORS-online&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">dataProviderArgs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;APIkey&#39;</span><span class="p">:</span> <span class="n">ORS_API_KEY</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myAssignments</span>
</pre></div>
</div>
</dd>
<dt>Example 4 – Add service times at each destination node</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># 60-second service times at destinations, Travel on road network, use travel times from the distance matrix.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Added use of `addStaticAssignment()` function for the service component.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myAssignments</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">initDataframe</span><span class="p">(</span><span class="s1">&#39;assignments&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">mySolution</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">endTimeSec</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">arc</span> <span class="ow">in</span> <span class="n">mySolution</span><span class="p">[</span><span class="n">v</span><span class="p">]:</span>
<span class="gp">... </span>        <span class="p">[</span><span class="n">myAssignments</span><span class="p">,</span> <span class="n">endTimeSec</span><span class="p">]</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">addAssignment2D</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">initAssignments</span>  <span class="o">=</span> <span class="n">myAssignments</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">objectID</span>         <span class="o">=</span> <span class="n">v</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">modelFile</span>        <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="s1">&#39;model&#39;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="n">startLoc</span>         <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myNodes</span><span class="p">[</span><span class="n">myNodes</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arc</span><span class="p">[</span><span class="mi">0</span><span class="p">]][[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="gp">... </span>            <span class="n">endLoc</span>           <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myNodes</span><span class="p">[</span><span class="n">myNodes</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">]][[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="gp">... </span>            <span class="n">startTimeSec</span>     <span class="o">=</span> <span class="n">endTimeSec</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">expDurationSec</span>   <span class="o">=</span> <span class="n">timeSec</span><span class="p">[</span><span class="n">arc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
<span class="gp">... </span>            <span class="n">leafletColor</span>     <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="s1">&#39;leafletColor&#39;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="n">cesiumColor</span>      <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="s1">&#39;cesiumColor&#39;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="n">routeType</span>        <span class="o">=</span> <span class="s1">&#39;fastest&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">dataProvider</span>     <span class="o">=</span> <span class="s1">&#39;ORS-online&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">dataProviderArgs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;APIkey&#39;</span><span class="p">:</span> <span class="n">ORS_API_KEY</span><span class="p">})</span>
<span class="gp">...</span>
<span class="gp">... </span>        <span class="n">myAssignments</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">addStaticAssignment</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">initAssignments</span>  <span class="o">=</span> <span class="n">myAssignments</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">objectID</span>         <span class="o">=</span> <span class="n">v</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">modelFile</span>        <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="s1">&#39;model&#39;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="n">loc</span>              <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myNodes</span><span class="p">[</span><span class="n">myNodes</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">]][[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="gp">... </span>            <span class="n">startTimeSec</span>     <span class="o">=</span> <span class="n">endTimeSec</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">endTimeSec</span>       <span class="o">=</span> <span class="n">endTimeSec</span> <span class="o">+</span> <span class="mf">60.0</span><span class="p">)</span>
</pre></div>
</div>
<p>…         endTimeSec += 60
&gt;&gt;&gt; myAssignments</p>
</dd>
<dt>Example 5 – Extend the previous example to show packages being left at destination nodes</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># 30-second service times at destinations, Travel on road network:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># added another use of `addStaticAssignment()` function to drop packages.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myAssignments</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">initDataframe</span><span class="p">(</span><span class="s1">&#39;assignments&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">mySolution</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">endTimeSec</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">arc</span> <span class="ow">in</span> <span class="n">mySolution</span><span class="p">[</span><span class="n">v</span><span class="p">]:</span>
<span class="gp">... </span>        <span class="p">[</span><span class="n">myAssignments</span><span class="p">,</span> <span class="n">endTimeSec</span><span class="p">]</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">addAssignment2D</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">initAssignments</span>  <span class="o">=</span> <span class="n">myAssignments</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">objectID</span>         <span class="o">=</span> <span class="n">v</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">modelFile</span>        <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="s1">&#39;model&#39;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="n">startLoc</span>         <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myNodes</span><span class="p">[</span><span class="n">myNodes</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arc</span><span class="p">[</span><span class="mi">0</span><span class="p">]][[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="gp">... </span>            <span class="n">endLoc</span>           <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myNodes</span><span class="p">[</span><span class="n">myNodes</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">]][[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="gp">... </span>            <span class="n">startTimeSec</span>     <span class="o">=</span> <span class="n">endTimeSec</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">leafletColor</span>     <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="s1">&#39;leafletColor&#39;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="n">cesiumColor</span>      <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="s1">&#39;cesiumColor&#39;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="n">routeType</span>        <span class="o">=</span> <span class="s1">&#39;fastest&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">dataProvider</span>     <span class="o">=</span> <span class="s1">&#39;ORS-online&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">dataProviderArgs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;APIkey&#39;</span><span class="p">:</span> <span class="n">ORS_API_KEY</span><span class="p">})</span>
<span class="gp">...</span>
<span class="gp">... </span>        <span class="n">myAssignments</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">addStaticAssignment</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">initAssignments</span>  <span class="o">=</span> <span class="n">myAssignments</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">objectID</span>         <span class="o">=</span> <span class="n">v</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">modelFile</span>        <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="s1">&#39;model&#39;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="n">loc</span>              <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myNodes</span><span class="p">[</span><span class="n">myNodes</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">]][[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="gp">... </span>            <span class="n">startTimeSec</span>     <span class="o">=</span> <span class="n">endTimeSec</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">endTimeSec</span>       <span class="o">=</span> <span class="n">endTimeSec</span> <span class="o">+</span> <span class="mf">30.0</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">... </span>        <span class="n">endTimeSec</span> <span class="o">+=</span> <span class="mi">30</span>
<span class="gp">...</span>
<span class="gp">... </span>        <span class="n">myAssignments</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">addStaticAssignment</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">initAssignments</span>  <span class="o">=</span> <span class="n">myAssignments</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">objectID</span>         <span class="o">=</span> <span class="s1">&#39;package </span><span class="si">%s</span><span class="s1"> </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
<span class="gp">... </span>            <span class="n">modelFile</span>        <span class="o">=</span> <span class="s1">&#39;/veroviz/models/box_yellow.gltf&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">loc</span>              <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myNodes</span><span class="p">[</span><span class="n">myNodes</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">]][[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="gp">... </span>            <span class="n">startTimeSec</span>     <span class="o">=</span> <span class="n">endTimeSec</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">endTimeSec</span>       <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myAssignments</span>
</pre></div>
</div>
</dd>
<dt>If you have saved your Cesium path as an environment variable, you may use <cite>os.environ</cite> to access it:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CESIUM_DIR</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;CESIUMDIR&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Otherwise, you may specify the patch to Cesium here:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># CESIUM_DIR = &#39;/provide/path/to/Cesium/&#39;</span>
</pre></div>
</div>
</dd>
<dt>Generate a 3D movie of the routes:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">vrv</span><span class="o">.</span><span class="n">createCesium</span><span class="p">(</span><span class="n">assignments</span> <span class="o">=</span> <span class="n">myAssignments</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">nodes</span>       <span class="o">=</span> <span class="n">myNodes</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">cesiumDir</span>   <span class="o">=</span> <span class="n">CESIUM_DIR</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">problemDir</span>  <span class="o">=</span> <span class="s1">&#39;addAssignment2D_example&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="veroviz.createAssignments.addAssignment3D">
<code class="sig-name descname">addAssignment3D</code><span class="sig-paren">(</span><em class="sig-param">initAssignments=None</em>, <em class="sig-param">odID=1</em>, <em class="sig-param">objectID=None</em>, <em class="sig-param">modelFile=None</em>, <em class="sig-param">startTimeSec=0.0</em>, <em class="sig-param">startLoc=None</em>, <em class="sig-param">endLoc=None</em>, <em class="sig-param">takeoffSpeedMPS=None</em>, <em class="sig-param">cruiseSpeedMPS=None</em>, <em class="sig-param">landSpeedMPS=None</em>, <em class="sig-param">cruiseAltMetersAGL=None</em>, <em class="sig-param">routeType='square'</em>, <em class="sig-param">climbRateMPS=None</em>, <em class="sig-param">descentRateMPS=None</em>, <em class="sig-param">earliestLandTime=-1</em>, <em class="sig-param">loiterPosition='arrivalAtAlt'</em>, <em class="sig-param">leafletColor='orange'</em>, <em class="sig-param">leafletWeight=3</em>, <em class="sig-param">leafletStyle='solid'</em>, <em class="sig-param">leafletOpacity=0.8</em>, <em class="sig-param">useArrows=True</em>, <em class="sig-param">modelScale=100</em>, <em class="sig-param">modelMinPxSize=75</em>, <em class="sig-param">cesiumColor='Cesium.Color.ORANGE'</em>, <em class="sig-param">cesiumWeight=3</em>, <em class="sig-param">cesiumStyle='solid'</em>, <em class="sig-param">cesiumOpacity=0.8</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/veroviz/createAssignments.html#addAssignment3D"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#veroviz.createAssignments.addAssignment3D" title="Permalink to this definition">¶</a></dt>
<dd><p>This function appends to an existing <a class="reference internal" href="assignments.html#assignments"><span class="std std-ref">Assignments</span></a> dataframe, or creates a new <a class="reference internal" href="assignments.html#assignments"><span class="std std-ref">Assignments</span></a> dataframe if <cite>initAssignments</cite> is None.  The new rows in this dataframe describe all of the vehicle movements between given starting and ending locations, including timestamps indicating the departure and arrival times for each intermediate point.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is for vehicles whose travel path includes changes in altitude (e.g., drones).  For ground vehicles traveling on a ground plane, a 2-dimensional version of this function is provided by <cite>addAssignment2D()</cite>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>odID</strong> (<em>int</em><em>, </em><em>Optional</em><em>, </em><em>default as 1</em>) – This field allows grouping of dataframe rows according to common origin/destination pairs.  Arc segments which are part of the same origin/destination share the same odID.</p></li>
<li><p><strong>objectID</strong> (<em>int/string</em><em>, </em><em>Optional</em><em>, </em><em>default as None</em>) – A descriptive name or index for a particular vehicle or object (e.g., ‘plane 1’, or ‘blue drone’).</p></li>
<li><p><strong>modelFile</strong> (<em>string</em><em>, </em><em>Optional</em><em>, </em><em>default as None</em>) – The relative path and filename of the 3D model associated with this object.  The 3D model, typically in the format of <cite>.gltf</cite> or <cite>.glb</cite>, will be visualized in Cesium.  The path should be relative to the directory where Cesium is installed (i.e., the <cite>modelFile</cite> should exist within the Cesium root directory).</p></li>
<li><p><strong>startTimeSec</strong> (<em>float</em><em>, </em><em>Optional</em><em>, </em><em>default as 0.0</em>) – The time, in seconds, at which the vehicle may leave the starting location.</p></li>
<li><p><strong>startLoc</strong> (<em>list</em><em>, </em><em>Required</em><em>, </em><em>default as 'None'</em>) – The starting location, expressed as either [lat, lon, alt] or [lat, lon]. If no altitude is provided, it will be assumed to be 0 meters above ground level.</p></li>
<li><p><strong>endLoc</strong> (<em>list</em><em>, </em><em>Required</em><em>, </em><em>default as 'None'</em>) – The ending location, expressed as either [lat, lon, alt] or [lat, lon]. If no altitude is provided, it will be assumed to be 0 meters above ground level.</p></li>
<li><p><strong>takeoffSpeedMPS</strong> (<em>float</em><em>, </em><em>Conditional</em><em>, </em><em>default as None</em>) – The speed of the aircraft, in meters per second, during the “takeoff” phase.  This will apply only to ‘square’ and ‘trapezoidal’ route types.  The takeoff phase is the first component of these route types, and is associated with an increase in altitude.  The takeoff speed is assumed to be constant, and ignores acceleration.  See <a class="reference internal" href="flight_profile_and_flight_path.html#flight-profile-and-flight-path"><span class="std std-ref">Flight Profile and Flight Path</span></a> for additional information.</p></li>
<li><p><strong>cruiseSpeedMPS</strong> (<em>float</em><em>, </em><em>Conditional</em><em>, </em><em>default as None</em>) – The speed of the aircraft, in meters per second, during the “cruising” phase.  This will apply to all of the route options.  Typically, the cruising phase occurs at a constant altitude, as specified by <cite>cruiseAltMetersAGL</cite>.  However, for the ‘triangular’ route type, cruiseSpeedMPS specifies the constant travel speed during both the ascent to, and immediate descent from, the cruise altitude.  In the ‘triangle’ route type, the aircraft has no horizontal travel at the cruise altitude.  In all cases, the cruise speed is assumed to be constant, and ignores acceleration.  See <a class="reference internal" href="flight_profile_and_flight_path.html#flight-profile-and-flight-path"><span class="std std-ref">Flight Profile and Flight Path</span></a> for additional information.</p></li>
<li><p><strong>landSpeedMPS</strong> (<em>float</em><em>, </em><em>Conditional</em><em>, </em><em>default as None</em>) – The speed of the aircraft, in meters per second, during the “landing” phase. This will apply to only the ‘square’ and ‘trapezoidal’ route types.  The landing phase is the last component of these route types, and is associated with a decrease in altitude.  The landing speed is assumed to be constant, and ignore deceleration.  See <a class="reference internal" href="flight_profile_and_flight_path.html#flight-profile-and-flight-path"><span class="std std-ref">Flight Profile and Flight Path</span></a> for additional information.</p></li>
<li><p><strong>cruiseAltMetersAGL</strong> (<em>float</em><em>, </em><em>Conditional</em><em>, </em><em>default as None</em>) – The altitude, in meters above ground level, at which the aircraft is in the “cruise” phase.  This phase is typically associated with horizontal movement at a fixed altitude.  The exception is for the ‘triangular’ route type, in which case the aircraft instantaneously transitions from ascent to descent at the cruise altitude (i.e., there is no horizontal travel at this altitude).  All but the ‘straight’ route type require/use the cruise altitude.  See <a class="reference internal" href="flight_profile_and_flight_path.html#flight-profile-and-flight-path"><span class="std std-ref">Flight Profile and Flight Path</span></a> for additional details.</p></li>
<li><p><strong>routeType</strong> (<em>string</em><em>, </em><em>Optional</em><em>, </em><em>default as 'square'</em>) – Specifies the basic shape of the flight profile.  Valid options include ‘square’, ‘triangular’, ‘trapezoidal’, and ‘straight’.  The square profile involves a vertical takeoff to a cruising altitude, horizontal travel at the cruising altitude, and a vertical landing.  The trapezoidal profile describes a takeoff phase in which the aircraft increases altitude and travels horizontally towards the destination until reaching the cruising altitude, horizontal travel at the cruising altitude, and a landing phase in which the aircraft decreases altitude and travels horizontally until reaching the destination.  For the trapezoidal profile, the horizontal movement during the takeoff and landing phases is a function of the <cite>climbRateMPS</cite> and <cite>descentRateMPS</cite>, respectively.  The triangular profile describes an ascent to the cruising altitude followed immediately by a descent to the destination.  Finally, the straight profile describes straight-line flight directly from the starting location to the ending location; the altitudes of these two locations may differ.  See <a class="reference internal" href="flight_profile_and_flight_path.html#flight-profile-and-flight-path"><span class="std std-ref">Flight Profile and Flight Path</span></a> for a description of these flight profiles.</p></li>
<li><p><strong>climbRateMPS</strong> (<em>float</em><em>, </em><em>Conditional</em><em>, </em><em>default as None</em>) – This parameter is used only for the ‘trapezoidal’ route type, and is in units of meters per second.  It describes the rate at which the aircraft increases its altitude, relative to the value of <cite>takeoffSpeedMPS</cite>.  If <cite>climbRateMPS == takeoffSpeedMPS</cite>, then the takeoff phase will be purely vertical.  If <cite>climbRateMPS</cite> is close to zero, then the takeoff phase will be characterized by a slow increase in altitude (and longer horizontal flight).  The aircraft’s actual travel speed during the climb will be <cite>takeoffSpeedMPS</cite>.  See <a class="reference internal" href="flight_profile_and_flight_path.html#flight-profile-and-flight-path"><span class="std std-ref">Flight Profile and Flight Path</span></a> for additional details.</p></li>
<li><p><strong>descentRateMPS</strong> (<em>float</em><em>, </em><em>Conditional</em><em>, </em><em>default as None</em>) – This parameter is used only for the ‘trapezoidal’ route type, and is in units of meters per second.  It describes the rate at which the aircraft decreases its altitude, relative to the value of <cite>landSpeedMPS</cite>.  If <cite>descentRateMPS == landSpeedMPS</cite>, then the landing phase will be purely vertical.  If <cite>descentRateMPS</cite> is close to zero, then the landing phase will be characterized by a slow decrease in altitude (and longer horizontal flight).  The aircraft’s actual travel speed during the descent will be <cite>landSpeedMPS</cite>.  See <a class="reference internal" href="flight_profile_and_flight_path.html#flight-profile-and-flight-path"><span class="std std-ref">Flight Profile and Flight Path</span></a> for additional details.</p></li>
<li><p><strong>earliestLandTime</strong> (<em>float</em><em>, </em><em>Optional</em><em>, </em><em>default as -1</em>) – Specifies the earliest time, in seconds, that the vehicle is allowed to complete travel to the ending location.  This parameter is useful in cases where time windows exist, or if a flying vehicle must wait for another vehicle (e.g., a drone that cannot land until a truck has arrived to recover it).  The default value of <cite>-1</cite> indicates that there is no restriction on the earliest landing time.</p></li>
<li><p><strong>loiterPosition</strong> (<em>string</em><em>, </em><em>Optional</em><em>, </em><em>default as 'arrivalAtAlt'</em>) – The position where the vehicle loiters if its un-delayed travel time from start to end would result in an arrival before <cite>earliestLandTime</cite>.  Valid options are ‘beforeTakeoff’, ‘takeoffAtAlt’, ‘arrivalAtAlt’, ‘afterLand’. See <a class="reference internal" href="flight_profile_and_flight_path.html#flight-profile-and-flight-path"><span class="std std-ref">Flight Profile and Flight Path</span></a> for details.</p></li>
<li><p><strong>leafletColor</strong> (<em>string</em><em>, </em><em>Optional</em><em>, </em><em>default as &quot;orange&quot;</em>) – The color of the route when displayed in Leaflet.  See <a class="reference internal" href="leaflet_style.html#leaflet-style"><span class="std std-ref">Leaflet Style</span></a> for a list of available colors.</p></li>
<li><p><strong>leafletWeight</strong> (<em>int</em><em>, </em><em>Optional</em><em>, </em><em>default as 3</em>) – The pixel width of the route when displayed in Leaflet.</p></li>
<li><p><strong>leafletStyle</strong> (<em>string</em><em>, </em><em>Optional</em><em>, </em><em>default as 'solid'</em>) – The line style of the route when displayed in Leaflet.  Valid options are ‘solid’, ‘dotted’, and ‘dashed’. See <a class="reference internal" href="leaflet_style.html#leaflet-style"><span class="std std-ref">Leaflet Style</span></a> for more information.</p></li>
<li><p><strong>leafletOpacity</strong> (<em>float in</em><em> [</em><em>0</em><em>, </em><em>1</em><em>]</em><em>, </em><em>Optional</em><em>, </em><em>default as 0.8</em>) – The opacity of the route when displayed in Leaflet. Valid values are in the range from 0 (invisible) to 1 (no transparency).</p></li>
<li><p><strong>useArrows</strong> (<em>bool</em><em>, </em><em>Optional</em><em>, </em><em>default as True</em>) – Indicates whether arrows should be shown on the route when displayed in Leaflet.</p></li>
<li><p><strong>modelScale</strong> (<em>int</em><em>, </em><em>Optional</em><em>, </em><em>default as 100</em>) – The scale of the 3D model (specified by the <cite>modelFile</cite> argument) when displayed in Cesium, such that 100 represents 100%.</p></li>
<li><p><strong>modelMinPxSize</strong> (<em>int</em><em>, </em><em>Optional</em><em>, </em><em>default as 75</em>) – The minimum pixel size of the 3D model (specified by the <cite>modelFile</cite> argument) when displayed in Cesium.  When zooming out, the model will not be smaller than this size; zooming in can result in a larger model.</p></li>
<li><p><strong>cesiumColor</strong> (<em>string</em><em>, </em><em>Optional</em><em>, </em><em>default as &quot;Cesium.Color.ORANGE&quot;</em>) – The color of the route when displayed in Cesium.  See <a class="reference internal" href="cesium_style.html#cesium-style"><span class="std std-ref">Cesium Style</span></a> for a list of available colors.</p></li>
<li><p><strong>cesiumWeight</strong> (<em>int</em><em>, </em><em>Optional</em><em>, </em><em>default as 3</em>) – The pixel width of the route when displayed in Cesium.</p></li>
<li><p><strong>cesiumStyle</strong> (<em>string</em><em>, </em><em>Optional</em><em>, </em><em>default as 'solid'</em>) – The line style of the route when displayed in Cesium.  Valid options are ‘solid’, ‘dotted’, and ‘dashed’. See <a class="reference internal" href="cesium_style.html#cesium-style"><span class="std std-ref">Cesium Style</span></a> for more information.</p></li>
<li><p><strong>cesiumOpacity</strong> (<em>float in</em><em> [</em><em>0</em><em>, </em><em>1</em><em>]</em><em>, </em><em>Optional</em><em>, </em><em>default as 0.8</em>) – The opacity of the route when displayed in Cesium. Valid values are in the range from 0 (invisible) to 1 (no transparency).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An <a class="reference internal" href="assignments.html#assignments"><span class="std std-ref">Assignments</span></a> dataframe containing an ordered sequence of paired GPS coordinates and altitudes describing the collection of straight-line segments required to travel from a start location to an end location.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="assignments.html#assignments"><span class="std std-ref">Assignments</span></a> dataframe</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<dl>
<dt>Import veroviz and check if it’s the latest version:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">veroviz</span> <span class="k">as</span> <span class="nn">vrv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vrv</span><span class="o">.</span><span class="n">checkVersion</span><span class="p">()</span>
</pre></div>
</div>
</dd>
<dt>Define 5 node locations, as [lat, lon] pairs:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">locs</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">42.8871085</span><span class="p">,</span> <span class="o">-</span><span class="mf">78.8731949</span><span class="p">],</span>
<span class="gp">... </span>        <span class="p">[</span><span class="mf">42.8888311</span><span class="p">,</span> <span class="o">-</span><span class="mf">78.8649649</span><span class="p">],</span>
<span class="gp">... </span>        <span class="p">[</span><span class="mf">42.8802158</span><span class="p">,</span> <span class="o">-</span><span class="mf">78.8660787</span><span class="p">],</span>
<span class="gp">... </span>        <span class="p">[</span><span class="mf">42.8845705</span><span class="p">,</span> <span class="o">-</span><span class="mf">78.8762794</span><span class="p">],</span>
<span class="gp">... </span>        <span class="p">[</span><span class="mf">42.8908031</span><span class="p">,</span> <span class="o">-</span><span class="mf">78.8770140</span><span class="p">]]</span>
</pre></div>
</div>
</dd>
<dt>Generate a nodes dataframe from these locations:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">myNodes</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">createNodesFromLocs</span><span class="p">(</span><span class="n">locs</span><span class="o">=</span><span class="n">locs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myNodes</span>
</pre></div>
</div>
</dd>
<dt>View these nodes on a map:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">vrv</span><span class="o">.</span><span class="n">createLeaflet</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="n">myNodes</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>Example 1 – Assume a single drone delivers packages from node 1 to all other nodes.</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Hard-code a solution:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mySolution</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s1">&#39;drone&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">1</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>Define some information about our drone, for later use:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">vehicleProperties</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s1">&#39;drone&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;modelPackage&#39;</span><span class="p">:</span> <span class="s1">&#39;veroviz/models/drone_package.gltf&#39;</span><span class="p">,</span>
<span class="gp">... </span>              <span class="s1">&#39;modelEmpty&#39;</span><span class="p">:</span> <span class="s1">&#39;veroviz/models/drone.gltf&#39;</span><span class="p">,</span>
<span class="gp">... </span>              <span class="s1">&#39;leafletColor&#39;</span><span class="p">:</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span>
<span class="gp">... </span>              <span class="s1">&#39;cesiumColor&#39;</span><span class="p">:</span> <span class="s1">&#39;Cesium.Color.RED&#39;</span><span class="p">},</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>Build the assignments for the drone deliveries:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">myAssignments</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">initDataframe</span><span class="p">(</span><span class="s1">&#39;assignments&#39;</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">endTimeSec</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">arc</span> <span class="ow">in</span> <span class="n">mySolution</span><span class="p">[</span><span class="s1">&#39;drone&#39;</span><span class="p">]:</span>
<span class="gp">... </span>    <span class="c1"># Fly from i to j with a package:</span>
<span class="gp">... </span>    <span class="p">[</span><span class="n">myAssignments</span><span class="p">,</span> <span class="n">endTimeSec</span><span class="p">]</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">addAssignment3D</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">initAssignments</span>    <span class="o">=</span> <span class="n">myAssignments</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">objectID</span>           <span class="o">=</span> <span class="s1">&#39;drone&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">modelFile</span>          <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="s1">&#39;drone&#39;</span><span class="p">][</span><span class="s1">&#39;modelPackage&#39;</span><span class="p">],</span>
<span class="gp">... </span>        <span class="n">startLoc</span>           <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myNodes</span><span class="p">[</span><span class="n">myNodes</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arc</span><span class="p">[</span><span class="mi">0</span><span class="p">]][[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="gp">... </span>        <span class="n">endLoc</span>             <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myNodes</span><span class="p">[</span><span class="n">myNodes</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">]][[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="gp">... </span>        <span class="n">startTimeSec</span>       <span class="o">=</span> <span class="n">endTimeSec</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">takeoffSpeedMPS</span>    <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">convertSpeed</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="s1">&#39;miles&#39;</span><span class="p">,</span> <span class="s1">&#39;hr&#39;</span><span class="p">,</span> <span class="s1">&#39;meters&#39;</span><span class="p">,</span> <span class="s1">&#39;sec&#39;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">cruiseSpeedMPS</span>     <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">convertSpeed</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="s1">&#39;miles&#39;</span><span class="p">,</span> <span class="s1">&#39;hr&#39;</span><span class="p">,</span> <span class="s1">&#39;meters&#39;</span><span class="p">,</span> <span class="s1">&#39;sec&#39;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">landSpeedMPS</span>       <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">convertSpeed</span><span class="p">(</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;miles&#39;</span><span class="p">,</span> <span class="s1">&#39;hr&#39;</span><span class="p">,</span> <span class="s1">&#39;meters&#39;</span><span class="p">,</span> <span class="s1">&#39;sec&#39;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">cruiseAltMetersAGL</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">convertDistance</span><span class="p">(</span><span class="mi">350</span><span class="p">,</span> <span class="s1">&#39;feet&#39;</span><span class="p">,</span> <span class="s1">&#39;meters&#39;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">routeType</span>          <span class="o">=</span> <span class="s1">&#39;square&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">leafletColor</span>       <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="s1">&#39;drone&#39;</span><span class="p">][</span><span class="s1">&#39;leafletColor&#39;</span><span class="p">],</span>
<span class="gp">... </span>        <span class="n">cesiumColor</span>        <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="s1">&#39;drone&#39;</span><span class="p">][</span><span class="s1">&#39;cesiumColor&#39;</span><span class="p">])</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="c1"># Drop off a package</span>
<span class="gp">... </span>    <span class="n">myAssignments</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">addStaticAssignment</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">initAssignments</span>  <span class="o">=</span> <span class="n">myAssignments</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">objectID</span>         <span class="o">=</span> <span class="s1">&#39;package </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
<span class="gp">... </span>            <span class="n">modelFile</span>        <span class="o">=</span> <span class="s1">&#39;/veroviz/models/box_yellow.gltf&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">loc</span>              <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myNodes</span><span class="p">[</span><span class="n">myNodes</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">]][[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="gp">... </span>            <span class="n">startTimeSec</span>     <span class="o">=</span> <span class="n">endTimeSec</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">endTimeSec</span>       <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="c1"># Fly from j to k empty:</span>
<span class="gp">... </span>    <span class="p">[</span><span class="n">myAssignments</span><span class="p">,</span> <span class="n">endTimeSec</span><span class="p">]</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">addAssignment3D</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">initAssignments</span>    <span class="o">=</span> <span class="n">myAssignments</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">objectID</span>           <span class="o">=</span> <span class="s1">&#39;drone&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">modelFile</span>          <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="s1">&#39;drone&#39;</span><span class="p">][</span><span class="s1">&#39;modelEmpty&#39;</span><span class="p">],</span>
<span class="gp">... </span>        <span class="n">startLoc</span>           <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myNodes</span><span class="p">[</span><span class="n">myNodes</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">]][[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="gp">... </span>        <span class="n">endLoc</span>             <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myNodes</span><span class="p">[</span><span class="n">myNodes</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arc</span><span class="p">[</span><span class="mi">2</span><span class="p">]][[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="gp">... </span>        <span class="n">startTimeSec</span>       <span class="o">=</span> <span class="n">endTimeSec</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">takeoffSpeedMPS</span>    <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">convertSpeed</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="s1">&#39;miles&#39;</span><span class="p">,</span> <span class="s1">&#39;hr&#39;</span><span class="p">,</span> <span class="s1">&#39;meters&#39;</span><span class="p">,</span> <span class="s1">&#39;sec&#39;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">cruiseSpeedMPS</span>     <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">convertSpeed</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="s1">&#39;miles&#39;</span><span class="p">,</span> <span class="s1">&#39;hr&#39;</span><span class="p">,</span> <span class="s1">&#39;meters&#39;</span><span class="p">,</span> <span class="s1">&#39;sec&#39;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">landSpeedMPS</span>       <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">convertSpeed</span><span class="p">(</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;miles&#39;</span><span class="p">,</span> <span class="s1">&#39;hr&#39;</span><span class="p">,</span> <span class="s1">&#39;meters&#39;</span><span class="p">,</span> <span class="s1">&#39;sec&#39;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">cruiseAltMetersAGL</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">convertDistance</span><span class="p">(</span><span class="mi">350</span><span class="p">,</span> <span class="s1">&#39;feet&#39;</span><span class="p">,</span> <span class="s1">&#39;meters&#39;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">routeType</span>          <span class="o">=</span> <span class="s1">&#39;square&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">leafletColor</span>       <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="s1">&#39;drone&#39;</span><span class="p">][</span><span class="s1">&#39;leafletColor&#39;</span><span class="p">],</span>
<span class="gp">... </span>        <span class="n">cesiumColor</span>        <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="s1">&#39;drone&#39;</span><span class="p">][</span><span class="s1">&#39;cesiumColor&#39;</span><span class="p">])</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myAssignments</span>
</pre></div>
</div>
</dd>
<dt>Show the nodes and assignments on a map:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">vrv</span><span class="o">.</span><span class="n">createLeaflet</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="n">myNodes</span><span class="p">,</span> <span class="n">arcs</span><span class="o">=</span><span class="n">myAssignments</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>If you have saved your Cesium path as an environment variable, you may use <cite>os.environ</cite> to access it:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CESIUM_DIR</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;CESIUMDIR&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Otherwise, you may specify the patch to Cesium here:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># CESIUM_DIR = &#39;/provide/path/to/Cesium/&#39;</span>
</pre></div>
</div>
</dd>
<dt>Create a 3D movie of the drone deliveries:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">vrv</span><span class="o">.</span><span class="n">createCesium</span><span class="p">(</span><span class="n">assignments</span> <span class="o">=</span> <span class="n">myAssignments</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">nodes</span>       <span class="o">=</span> <span class="n">myNodes</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">cesiumDir</span>   <span class="o">=</span> <span class="n">CESIUM_DIR</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">problemDir</span>  <span class="o">=</span> <span class="s1">&#39;addAssignment3D_example1&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>Example 2 – Coordinate deliveries with a drone launched from a truck</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Hard-code a solution.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># The truck will visit nodes 1-&gt;3-&gt;5-&gt;1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># The drone will launch from the truck at node 1, deliver to node 2, and return to the truck at node 3.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># The drone will then launch from the truck at 1, deliver to 4 and return to 5.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># The drone cannot land at nodes 3 and 5 until the truck has arrived.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mySolution</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s1">&#39;drone&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]],</span>
<span class="gp">... </span>    <span class="s1">&#39;truck&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">1</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>Define some information about our 2 vehicles, for use below:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">vehicleProperties</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s1">&#39;drone&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;modelPackage&#39;</span><span class="p">:</span> <span class="s1">&#39;veroviz/models/drone_package.gltf&#39;</span><span class="p">,</span>
<span class="gp">... </span>              <span class="s1">&#39;modelEmpty&#39;</span><span class="p">:</span> <span class="s1">&#39;veroviz/models/drone.gltf&#39;</span><span class="p">,</span>
<span class="gp">... </span>              <span class="s1">&#39;leafletColor&#39;</span><span class="p">:</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span>
<span class="gp">... </span>              <span class="s1">&#39;cesiumColor&#39;</span><span class="p">:</span> <span class="s1">&#39;Cesium.Color.RED&#39;</span><span class="p">},</span>
<span class="gp">... </span>    <span class="s1">&#39;truck&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="s1">&#39;veroviz/models/ub_truck.gltf&#39;</span><span class="p">,</span>
<span class="gp">... </span>              <span class="s1">&#39;leafletColor&#39;</span><span class="p">:</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span>
<span class="gp">... </span>              <span class="s1">&#39;cesiumColor&#39;</span><span class="p">:</span> <span class="s1">&#39;Cesium.Color.BLUE&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># This example assumes the use of ORS as the data provider.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># If you have saved your API key as an environment variable, you may use `os.environ` to access it:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ORS_API_KEY</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;ORSKEY&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Otherwise, you may specify your key here:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># ORS_API_KEY = &#39;YOUR_ORS_KEY_GOES_HERE&#39;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Obtain the travel times for the truck:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">timeSecTruck</span><span class="p">,</span> <span class="n">distMetersTruck</span><span class="p">]</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">getTimeDist2D</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">nodes</span>            <span class="o">=</span> <span class="n">myNodes</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">routeType</span>        <span class="o">=</span> <span class="s1">&#39;fastest&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">dataProvider</span>     <span class="o">=</span> <span class="s1">&#39;ORS-online&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">dataProviderArgs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;APIkey&#39;</span><span class="p">:</span> <span class="n">ORS_API_KEY</span><span class="p">})</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Obtain the travel times for the drone:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">timeSecDrone</span><span class="p">,</span> <span class="n">groundDist</span><span class="p">,</span> <span class="n">TotalDist</span><span class="p">]</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">getTimeDist3D</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">nodes</span>            <span class="o">=</span> <span class="n">myNodes</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">takeoffSpeedMPS</span>    <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">convertSpeed</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="s1">&#39;miles&#39;</span><span class="p">,</span> <span class="s1">&#39;hr&#39;</span><span class="p">,</span> <span class="s1">&#39;meters&#39;</span><span class="p">,</span> <span class="s1">&#39;sec&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">cruiseSpeedMPS</span>     <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">convertSpeed</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="s1">&#39;miles&#39;</span><span class="p">,</span> <span class="s1">&#39;hr&#39;</span><span class="p">,</span> <span class="s1">&#39;meters&#39;</span><span class="p">,</span> <span class="s1">&#39;sec&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">landSpeedMPS</span>       <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">convertSpeed</span><span class="p">(</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;miles&#39;</span><span class="p">,</span> <span class="s1">&#39;hr&#39;</span><span class="p">,</span> <span class="s1">&#39;meters&#39;</span><span class="p">,</span> <span class="s1">&#39;sec&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">cruiseAltMetersAGL</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">convertDistance</span><span class="p">(</span><span class="mi">350</span><span class="p">,</span> <span class="s1">&#39;feet&#39;</span><span class="p">,</span> <span class="s1">&#39;meters&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">routeType</span>          <span class="o">=</span> <span class="s1">&#39;square&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Find the coordination times for the truck and drone.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># These will be the earliest times that both the truck and drone can arrive at a node.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maxArrivalTime</span> <span class="o">=</span> <span class="p">{}</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># 1) The truck travels from 1 to 3; the drone travels from 1 to 2 to 3:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">truckArrivalTime</span> <span class="o">=</span> <span class="n">timeSecTruck</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">droneArrivalTime</span> <span class="o">=</span> <span class="n">timeSecDrone</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">timeSecDrone</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maxArrivalTime</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">truckArrivalTime</span><span class="p">,</span> <span class="n">droneArrivalTime</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># 2) The truck travels from 3 to 5; the drone travels from 3 to 4 to 5:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">truckArrivalTime</span> <span class="o">=</span> <span class="n">maxArrivalTime</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="n">timeSecTruck</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">droneArrivalTime</span> <span class="o">=</span> <span class="n">maxArrivalTime</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="n">timeSecDrone</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="n">timeSecDrone</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maxArrivalTime</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">truckArrivalTime</span><span class="p">,</span> <span class="n">droneArrivalTime</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># 3) Let&#39;s also capture the time at which the truck will return to node 1:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maxArrivalTime</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">maxArrivalTime</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">+</span> <span class="n">timeSecTruck</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># maxArrival Time[1] is now the total time required to complete all of the deliveries</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maxArrivalTime</span>
</pre></div>
</div>
</dd>
<dt>Build assignments for the drone deliveries:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">myAssignments</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">initDataframe</span><span class="p">(</span><span class="s1">&#39;assignments&#39;</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">endTimeSec</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">arc</span> <span class="ow">in</span> <span class="n">mySolution</span><span class="p">[</span><span class="s1">&#39;drone&#39;</span><span class="p">]:</span>
<span class="gp">... </span>    <span class="c1"># Fly from i to j with a package:</span>
<span class="gp">... </span>    <span class="p">[</span><span class="n">myAssignments</span><span class="p">,</span> <span class="n">endTimeSec</span><span class="p">]</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">addAssignment3D</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">initAssignments</span>    <span class="o">=</span> <span class="n">myAssignments</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">objectID</span>           <span class="o">=</span> <span class="s1">&#39;drone&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">modelFile</span>          <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="s1">&#39;drone&#39;</span><span class="p">][</span><span class="s1">&#39;modelPackage&#39;</span><span class="p">],</span>
<span class="gp">... </span>        <span class="n">startLoc</span>           <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myNodes</span><span class="p">[</span><span class="n">myNodes</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arc</span><span class="p">[</span><span class="mi">0</span><span class="p">]][[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="gp">... </span>        <span class="n">endLoc</span>             <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myNodes</span><span class="p">[</span><span class="n">myNodes</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">]][[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="gp">... </span>        <span class="n">startTimeSec</span>       <span class="o">=</span> <span class="n">endTimeSec</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">takeoffSpeedMPS</span>    <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">convertSpeed</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="s1">&#39;miles&#39;</span><span class="p">,</span> <span class="s1">&#39;hr&#39;</span><span class="p">,</span> <span class="s1">&#39;meters&#39;</span><span class="p">,</span> <span class="s1">&#39;sec&#39;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">cruiseSpeedMPS</span>     <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">convertSpeed</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="s1">&#39;miles&#39;</span><span class="p">,</span> <span class="s1">&#39;hr&#39;</span><span class="p">,</span> <span class="s1">&#39;meters&#39;</span><span class="p">,</span> <span class="s1">&#39;sec&#39;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">landSpeedMPS</span>       <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">convertSpeed</span><span class="p">(</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;miles&#39;</span><span class="p">,</span> <span class="s1">&#39;hr&#39;</span><span class="p">,</span> <span class="s1">&#39;meters&#39;</span><span class="p">,</span> <span class="s1">&#39;sec&#39;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">cruiseAltMetersAGL</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">convertDistance</span><span class="p">(</span><span class="mi">350</span><span class="p">,</span> <span class="s1">&#39;feet&#39;</span><span class="p">,</span> <span class="s1">&#39;meters&#39;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">routeType</span>          <span class="o">=</span> <span class="s1">&#39;square&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">leafletColor</span>       <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="s1">&#39;drone&#39;</span><span class="p">][</span><span class="s1">&#39;leafletColor&#39;</span><span class="p">],</span>
<span class="gp">... </span>        <span class="n">cesiumColor</span>        <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="s1">&#39;drone&#39;</span><span class="p">][</span><span class="s1">&#39;cesiumColor&#39;</span><span class="p">])</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="c1"># Drop off a package</span>
<span class="gp">... </span>    <span class="n">myAssignments</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">addStaticAssignment</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">initAssignments</span>  <span class="o">=</span> <span class="n">myAssignments</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">objectID</span>         <span class="o">=</span> <span class="s1">&#39;package </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
<span class="gp">... </span>            <span class="n">modelFile</span>        <span class="o">=</span> <span class="s1">&#39;/veroviz/models/box_yellow.gltf&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">loc</span>              <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myNodes</span><span class="p">[</span><span class="n">myNodes</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">]][[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="gp">... </span>            <span class="n">startTimeSec</span>     <span class="o">=</span> <span class="n">endTimeSec</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">endTimeSec</span>       <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="c1"># Fly from j to k empty:</span>
<span class="gp">... </span>    <span class="p">[</span><span class="n">myAssignments</span><span class="p">,</span> <span class="n">endTimeSec</span><span class="p">]</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">addAssignment3D</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">initAssignments</span>    <span class="o">=</span> <span class="n">myAssignments</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">objectID</span>           <span class="o">=</span> <span class="s1">&#39;drone&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">modelFile</span>          <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="s1">&#39;drone&#39;</span><span class="p">][</span><span class="s1">&#39;modelEmpty&#39;</span><span class="p">],</span>
<span class="gp">... </span>        <span class="n">startLoc</span>           <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myNodes</span><span class="p">[</span><span class="n">myNodes</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">]][[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="gp">... </span>        <span class="n">endLoc</span>             <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myNodes</span><span class="p">[</span><span class="n">myNodes</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arc</span><span class="p">[</span><span class="mi">2</span><span class="p">]][[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="gp">... </span>        <span class="n">startTimeSec</span>       <span class="o">=</span> <span class="n">endTimeSec</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">takeoffSpeedMPS</span>    <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">convertSpeed</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="s1">&#39;miles&#39;</span><span class="p">,</span> <span class="s1">&#39;hr&#39;</span><span class="p">,</span> <span class="s1">&#39;meters&#39;</span><span class="p">,</span> <span class="s1">&#39;sec&#39;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">cruiseSpeedMPS</span>     <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">convertSpeed</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="s1">&#39;miles&#39;</span><span class="p">,</span> <span class="s1">&#39;hr&#39;</span><span class="p">,</span> <span class="s1">&#39;meters&#39;</span><span class="p">,</span> <span class="s1">&#39;sec&#39;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">landSpeedMPS</span>       <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">convertSpeed</span><span class="p">(</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;miles&#39;</span><span class="p">,</span> <span class="s1">&#39;hr&#39;</span><span class="p">,</span> <span class="s1">&#39;meters&#39;</span><span class="p">,</span> <span class="s1">&#39;sec&#39;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">cruiseAltMetersAGL</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">convertDistance</span><span class="p">(</span><span class="mi">350</span><span class="p">,</span> <span class="s1">&#39;feet&#39;</span><span class="p">,</span> <span class="s1">&#39;meters&#39;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">routeType</span>          <span class="o">=</span> <span class="s1">&#39;square&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">earliestLandTime</span>   <span class="o">=</span> <span class="n">maxArrivalTime</span><span class="p">[</span><span class="n">arc</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span>
<span class="gp">... </span>        <span class="n">loiterPosition</span>     <span class="o">=</span> <span class="s1">&#39;arrivalAtAlt&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">leafletColor</span>       <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="s1">&#39;drone&#39;</span><span class="p">][</span><span class="s1">&#39;leafletColor&#39;</span><span class="p">],</span>
<span class="gp">... </span>        <span class="n">cesiumColor</span>        <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="s1">&#39;drone&#39;</span><span class="p">][</span><span class="s1">&#39;cesiumColor&#39;</span><span class="p">])</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myAssignments</span>
</pre></div>
</div>
</dd>
<dt>Build assignments for the truck route:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">endTimeSec</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">arc</span> <span class="ow">in</span> <span class="n">mySolution</span><span class="p">[</span><span class="s1">&#39;truck&#39;</span><span class="p">]:</span>
<span class="gp">... </span>    <span class="p">[</span><span class="n">myAssignments</span><span class="p">,</span> <span class="n">endTimeSec</span><span class="p">]</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">addAssignment2D</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">initAssignments</span>  <span class="o">=</span> <span class="n">myAssignments</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">objectID</span>         <span class="o">=</span> <span class="s1">&#39;truck&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">modelFile</span>        <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="s1">&#39;truck&#39;</span><span class="p">][</span><span class="s1">&#39;model&#39;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="n">startLoc</span>         <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myNodes</span><span class="p">[</span><span class="n">myNodes</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arc</span><span class="p">[</span><span class="mi">0</span><span class="p">]][[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="gp">... </span>            <span class="n">endLoc</span>           <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myNodes</span><span class="p">[</span><span class="n">myNodes</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">]][[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="gp">... </span>            <span class="n">startTimeSec</span>     <span class="o">=</span> <span class="n">endTimeSec</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">leafletColor</span>     <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="s1">&#39;truck&#39;</span><span class="p">][</span><span class="s1">&#39;leafletColor&#39;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="n">cesiumColor</span>      <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="s1">&#39;truck&#39;</span><span class="p">][</span><span class="s1">&#39;cesiumColor&#39;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="n">routeType</span>        <span class="o">=</span> <span class="s1">&#39;fastest&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">dataProvider</span>     <span class="o">=</span> <span class="s1">&#39;ORS-online&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">dataProviderArgs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;APIkey&#39;</span><span class="p">:</span> <span class="n">ORS_API_KEY</span><span class="p">})</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="c1"># If necessary, wait for the drone to arrive:</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="p">(</span><span class="n">endTimeSec</span> <span class="o">&lt;</span> <span class="n">maxArrivalTime</span><span class="p">[</span><span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">]]):</span>
<span class="gp">... </span>        <span class="n">myAssignments</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">addStaticAssignment</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">initAssignments</span>  <span class="o">=</span> <span class="n">myAssignments</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">objectID</span>         <span class="o">=</span> <span class="s1">&#39;truck&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">modelFile</span>        <span class="o">=</span> <span class="n">vehicleProperties</span><span class="p">[</span><span class="s1">&#39;truck&#39;</span><span class="p">][</span><span class="s1">&#39;model&#39;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="n">loc</span>              <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myNodes</span><span class="p">[</span><span class="n">myNodes</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">]][[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="gp">... </span>            <span class="n">startTimeSec</span>     <span class="o">=</span> <span class="n">endTimeSec</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">endTimeSec</span>       <span class="o">=</span> <span class="n">maxArrivalTime</span><span class="p">[</span><span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
<span class="gp">...</span>
<span class="gp">... </span>        <span class="n">endTimeSec</span> <span class="o">=</span> <span class="n">maxArrivalTime</span><span class="p">[</span><span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myAssignments</span>
</pre></div>
</div>
</dd>
<dt>Show the nodes and assignments on a map:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">vrv</span><span class="o">.</span><span class="n">createLeaflet</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="n">myNodes</span><span class="p">,</span> <span class="n">arcs</span><span class="o">=</span><span class="n">myAssignments</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>Create a 3D movie of the drone deliveries:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">vrv</span><span class="o">.</span><span class="n">createCesium</span><span class="p">(</span><span class="n">assignments</span> <span class="o">=</span> <span class="n">myAssignments</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">nodes</span>       <span class="o">=</span> <span class="n">myNodes</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">cesiumDir</span>   <span class="o">=</span> <span class="n">CESIUM_DIR</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">problemDir</span>  <span class="o">=</span> <span class="s1">&#39;addAssignment3D_example1&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="veroviz.createAssignments.addStaticAssignment">
<code class="sig-name descname">addStaticAssignment</code><span class="sig-paren">(</span><em class="sig-param">initAssignments=None</em>, <em class="sig-param">odID=1</em>, <em class="sig-param">objectID=None</em>, <em class="sig-param">modelFile=None</em>, <em class="sig-param">modelScale=100</em>, <em class="sig-param">modelMinPxSize=75</em>, <em class="sig-param">loc=None</em>, <em class="sig-param">startTimeSec=None</em>, <em class="sig-param">endTimeSec=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/veroviz/createAssignments.html#addStaticAssignment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#veroviz.createAssignments.addStaticAssignment" title="Permalink to this definition">¶</a></dt>
<dd><p>This function adds an “object” to an assignments dataframe.  One use of this function is to add a package or other stationary 3D model to be displayed in Cesium.  This function is also useful for holding a vehicle stationary at a location (e.g., during service or loitering).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>initAssignments</strong> (<a class="reference internal" href="assignments.html#assignments"><span class="std std-ref">Assignments</span></a> dataframe, Optional, default as None) – If provided, the function will append a row to this dataframe.</p></li>
<li><p><strong>odID</strong> (<em>int</em><em>, </em><em>Optional</em><em>, </em><em>default as 1</em>) – This field allows grouping of dataframe rows according to common origin/destination pairs.  Arc segments which are part of the same origin/destination share the same odID.</p></li>
<li><p><strong>objectID</strong> (<em>int/string</em><em>, </em><em>Optional</em><em>, </em><em>default as None</em>) – A descriptive name or index for this object.  In the case of adding a stationary vehicle performing a service activity, the <cite>objectID</cite> should typically be the same as the <cite>objectID</cite> used by the vehicle when it was in motion.</p></li>
<li><p><strong>modelFile</strong> (<em>string</em><em>, </em><em>Optional</em><em>, </em><em>default as None</em>) – The relative path and filename of the 3D model associated with this object.  The 3D model, typically in the format of <cite>.gltf</cite> or <cite>.glb</cite>, will be visualized in Cesium.  The path should be relative to the directory where Cesium is installed (i.e., the <cite>modelFile</cite> should exist within the Cesium root directory).</p></li>
<li><p><strong>modelScale</strong> (<em>int</em><em>, </em><em>Optional</em><em>, </em><em>default as 100</em>) – The scale of the 3D model (specified by the <cite>modelFile</cite> argument) when displayed in Cesium, such that 100 represents 100%.</p></li>
<li><p><strong>modelMinPxSize</strong> (<em>int</em><em>, </em><em>Optional</em><em>, </em><em>default as 75</em>) – The minimum pixel size of the 3D model (specified by the <cite>modelFile</cite> argument) when displayed in Cesium.  When zooming out, the model will not be smaller than this size; zooming in can result in a larger model.</p></li>
<li><p><strong>loc</strong> (<em>list</em><em>, </em><em>Required</em><em>, </em><em>default as None</em>) – The coordinate of the static object, expressed as either [lat, lon, alt] or [lat, lon]. If no altitude is provided, it will be assumed to be 0 meters above ground level.</p></li>
<li><p><strong>startTimeSec</strong> (<em>int</em><em>, </em><em>Required</em><em>, </em><em>default as None</em><em>,</em>) – Specifies the time at which this object appears.</p></li>
<li><p><strong>endTimeSec</strong> (<em>int</em><em>, </em><em>Required</em><em>, </em><em>default as None</em>) – Specifies when the object is no longer displayed.  To keep the object displayed forever, set <cite>endTimeSec = -1</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An assignments dataframe with a new row associated with this stationary object.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="assignments.html#assignments"><span class="std std-ref">Assignments</span></a> pandas.dataframe</p>
</dd>
</dl>
<p class="rubric">Example</p>
<dl>
<dt>Import veroviz and check the latest version.</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">veroviz</span> <span class="k">as</span> <span class="nn">vrv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">vrv</span><span class="o">.</span><span class="n">checkVersion</span><span class="p">()</span>
</pre></div>
</div>
</dd>
<dt>Create two nodes.</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">myNodes</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">createNodesFromLocs</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">locs</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">42.1538</span><span class="p">,</span> <span class="o">-</span><span class="mf">78.4253</span><span class="p">],</span>
<span class="gp">... </span>            <span class="p">[</span><span class="mf">42.6343</span><span class="p">,</span> <span class="o">-</span><span class="mf">78.1146</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myNodes</span>
</pre></div>
</div>
</dd>
<dt>Move the truck from one node to the other.</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">myAssignments</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">getShapepoints2D</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">odID</span>           <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">objectID</span>       <span class="o">=</span> <span class="s1">&#39;truck&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">modelFile</span>      <span class="o">=</span> <span class="s1">&#39;veroviz/models/ub_truck.gltf&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">modelScale</span>     <span class="o">=</span> <span class="mi">80</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">modelMinPxSize</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">startLoc</span>       <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myNodes</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">][[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">endLoc</span>         <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myNodes</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1</span><span class="p">][[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">routeType</span>      <span class="o">=</span> <span class="s1">&#39;euclidean2D&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">dataProvider</span>   <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">speedMPS</span>       <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">convertSpeed</span><span class="p">(</span><span class="mi">55</span><span class="p">,</span> <span class="s1">&#39;miles&#39;</span><span class="p">,</span> <span class="s1">&#39;hr&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">))</span>
</pre></div>
</div>
</dd>
<dt>Make the truck wait at the destination.</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">myAssignments</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">addStaticAssignment</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">initAssignments</span> <span class="o">=</span> <span class="n">myAssignments</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">odID</span>            <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">objectID</span>        <span class="o">=</span> <span class="s1">&#39;truck&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">modelFile</span>       <span class="o">=</span> <span class="s1">&#39;veroviz/models/ub_truck.gltf&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">modelScale</span>      <span class="o">=</span> <span class="mi">80</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">modelMinPxSize</span>  <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">loc</span>             <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myAssignments</span><span class="p">[</span><span class="n">myAssignments</span><span class="p">[</span><span class="s1">&#39;objectID&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;truck&#39;</span><span class="p">][[</span><span class="s1">&#39;endLat&#39;</span><span class="p">,</span> <span class="s1">&#39;endLon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="gp">... </span>    <span class="n">startTimeSec</span>    <span class="o">=</span> <span class="n">myAssignments</span><span class="p">[</span><span class="n">myAssignments</span><span class="p">[</span><span class="s1">&#39;objectID&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;truck&#39;</span><span class="p">][</span><span class="s1">&#39;endTimeSec&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">endTimeSec</span>      <span class="o">=</span> <span class="n">myAssignments</span><span class="p">[</span><span class="n">myAssignments</span><span class="p">[</span><span class="s1">&#39;objectID&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;truck&#39;</span><span class="p">][</span><span class="s1">&#39;endTimeSec&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">30</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>Drop off a package.</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">myAssignments</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">addStaticAssignment</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">initAssignments</span> <span class="o">=</span> <span class="n">myAssignments</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">odID</span>            <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">objectID</span>        <span class="o">=</span> <span class="s1">&#39;package&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">modelFile</span>       <span class="o">=</span> <span class="s1">&#39;veroviz/models/box_blue.gltf&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">modelScale</span>      <span class="o">=</span> <span class="mi">50</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">modelMinPxSize</span>  <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">loc</span>             <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">myAssignments</span><span class="p">[</span><span class="n">myAssignments</span><span class="p">[</span><span class="s1">&#39;objectID&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;truck&#39;</span><span class="p">][[</span><span class="s1">&#39;endLat&#39;</span><span class="p">,</span> <span class="s1">&#39;endLon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="gp">... </span>    <span class="n">startTimeSec</span>    <span class="o">=</span> <span class="n">myAssignments</span><span class="p">[</span><span class="n">myAssignments</span><span class="p">[</span><span class="s1">&#39;objectID&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;truck&#39;</span><span class="p">][</span><span class="s1">&#39;endTimeSec&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">30</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">endTimeSec</span>      <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>View in Leaflet.  Note that we can’t see the truck waiting.  Also, the package doesn’t show up in Leaflet.</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">vrv</span><span class="o">.</span><span class="n">createLeaflet</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="n">myNodes</span><span class="p">,</span> <span class="n">arcs</span><span class="o">=</span><span class="n">myAssignments</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>Create Cesium output, so we can observe our truck and package.</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">vrv</span><span class="o">.</span><span class="n">createCesium</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">assignments</span> <span class="o">=</span> <span class="n">myAssignments</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">nodes</span>       <span class="o">=</span> <span class="n">myNodes</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">startTime</span>   <span class="o">=</span> <span class="s1">&#39;08:00:00&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">cesiumDir</span>   <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;CESIUMDIR&#39;</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">problemDir</span>  <span class="o">=</span> <span class="s1">&#39;static_object_demo&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="veroviz.createAssignments.createAssignmentsFromArcs2D">
<code class="sig-name descname">createAssignmentsFromArcs2D</code><span class="sig-paren">(</span><em class="sig-param">initAssignments=None</em>, <em class="sig-param">arcs=None</em>, <em class="sig-param">serviceTimeSec=0.0</em>, <em class="sig-param">modelFile=None</em>, <em class="sig-param">modelScale=100</em>, <em class="sig-param">modelMinPxSize=75</em>, <em class="sig-param">startTimeSec=0.0</em>, <em class="sig-param">expDurationArgs=None</em>, <em class="sig-param">routeType='euclidean2D'</em>, <em class="sig-param">speedMPS=None</em>, <em class="sig-param">leafletColor=None</em>, <em class="sig-param">leafletWeight=None</em>, <em class="sig-param">leafletStyle=None</em>, <em class="sig-param">leafletOpacity=None</em>, <em class="sig-param">useArrows=True</em>, <em class="sig-param">cesiumColor=None</em>, <em class="sig-param">cesiumWeight=None</em>, <em class="sig-param">cesiumStyle=None</em>, <em class="sig-param">cesiumOpacity=None</em>, <em class="sig-param">dataProvider=None</em>, <em class="sig-param">dataProviderArgs=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/veroviz/createAssignments.html#createAssignmentsFromArcs2D"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#veroviz.createAssignments.createAssignmentsFromArcs2D" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>This function generates an “assignments” dataframe containing all of the “shapepoints” between successive arcs, including timestamps indicating the departure and arrival times for each shapepoint. Shapepoints are pairs of GPS coordinates that are connected by straight lines.  For a particular origin and destination, numerous individual shapepoints can be combined to define a travel route along a road network.</p>
<p>This function is for vehicles traveling on a ground plane (2-dimensional).  For vehicles requiring an altitude component (e.g., drones), a 3D version of this function is provided by <cite>createAssignmentsFromArcs3D()</cite>.</p>
<p>This function creates an assignments dataframe from an arcs dataframe.  Similar functions are available to create an assignments dataframe from a sequence of nodes (<cite>createShapepointsFromNodeSeq2D()</cite>) or from a sequence of locations (<cite>createShapepointsFromLocSeq2D()</cite>).</p>
<dl class="simple">
<dt>initAssignments: <a class="reference internal" href="assignments.html#assignments"><span class="std std-ref">Assignments</span></a> dataframe, Optional, default as None</dt><dd><p>If provided, the function will append rows to this dataframe.</p>
</dd>
<dt>arcs: <a class="reference internal" href="arcs.html#arcs"><span class="std std-ref">Arcs</span></a>, Required</dt><dd><p>A <a class="reference internal" href="arcs.html#arcs"><span class="std std-ref">Arcs</span></a> dataframe, from which the assignments dataframe will be generated.</p>
</dd>
<dt>serviceTimeSec: float, Optional, default as 0.0</dt><dd><p>Specifies a duration, in seconds, that the vehicle will be stationary at each destination location in the arcs dataframe.</p>
</dd>
<dt>modelFile: string, Optional, default as None</dt><dd><p>The relative path and filename of the 3D model associated with the object described in the arcs dataframe.  The 3D model, typically in the format of <cite>.gltf</cite> or <cite>.glb</cite>, will be visualized in Cesium.  The path should be relative to the directory where Cesium is installed (i.e., the <cite>modelFile</cite> should exist within the Cesium root directory).</p>
</dd>
<dt>modelScale: int, Optional, default as 100</dt><dd><p>The scale of the 3D model (specified by the <cite>modelFile</cite> argument) when displayed in Cesium, such that 100 represents 100%.</p>
</dd>
<dt>modelMinPxSize: int, Optional, default as 75</dt><dd><p>The minimum pixel size of the 3D model (specified by the <cite>modelFile</cite> argument) when displayed in Cesium.  When zooming out, the model will not be smaller than this size; zooming in can result in a larger model.</p>
</dd>
<dt>startTimeSec: float, Optional, default as 0.0</dt><dd><p>The time, in seconds, at which the vehicle may leave the starting location.</p>
</dd>
<dt>expDurationArgs: dictionary, Optional, default as None</dt><dd><p>Sometimes there are inconsistencies between the travel times specified in the turn-by-turn navigation (i.e., shapepoints) and the travel matrices (i.e., from the getTimeDist functions).  The <cite>expDurationArgs</cite> field may take two different values.
First, if <cite>expDurationArgs</cite> is <cite>None</cite> (default), the travel times will be based solely on the turn-by-turn times.  Second, if <cite>expDurationArgs</cite> is a dictionary with a key of <cite>‘getTravelTimes’</cite> and a corresponding value of <cite>True</cite>, then this function will call the <cite>getTimeDist2D()</cite> function for each origin/destination pair (i.e., for each row of the arcs dataframe).  In this case, all shapepoint travel times will be adjusted/redistributed to match the resulting values.</p>
</dd>
<dt>routeType: string, Optional, default as ‘euclidean2D’</dt><dd><p>This describes a characteristic of the travel mode.  Possible values are: ‘euclidean2D’, ‘manhattan’, ‘fastest’, ‘shortest’, ‘pedestrian’, ‘cycling’, and ‘truck’.  The ‘euclidean2D’ and ‘manhattan’ options are calculated directly from GPS coordinates, without a road network.  Neither of these two options require a data provider.  However, the other options rely on road network information and require a data provider.  Furthermore, some of those other options are not supported by all data providers.  See <a class="reference internal" href="dataproviders.html#data-providers"><span class="std std-ref">Data Providers</span></a> for details.</p>
</dd>
<dt>speedMPS: float, Conditional, default as None</dt><dd><p>Speed of the vehicle, in units of meters per second. For route types that are not road-network based (i.e., ‘euclidean2D’ and ‘manhattan’), this field is required to calculate travel times. Otherwise, if a route type already incorporates travel speeds from road network data, (i.e., ‘fastest’, ‘shortest’, and ‘pedestrain’), this input argument may be ignored.  If provided, <cite>speedMPS</cite> will override travel speed data used by the route type option.</p>
</dd>
<dt>leafletColor: string, Optional, default as None</dt><dd><p>Overrides the <cite>leafletColor</cite> column of the input <a class="reference internal" href="arcs.html#arcs"><span class="std std-ref">Arcs</span></a> dataframe.  If provided, all arcs will be displayed with this color.  See <a class="reference internal" href="leaflet_style.html#leaflet-style"><span class="std std-ref">Leaflet Style</span></a> for a list of available colors.</p>
</dd>
<dt>leafletWeight: int, Optional, default as None</dt><dd><p>Overrides the <cite>leafletWeight</cite> column of the input <a class="reference internal" href="arcs.html#arcs"><span class="std std-ref">Arcs</span></a> dataframe.  If provided, all arcs will be displayed with this line thickness (in pixels).</p>
</dd>
<dt>leafletStyle: string, Optional, default as None</dt><dd><p>Overrides the <cite>leafletStyle</cite> column of the input <a class="reference internal" href="arcs.html#arcs"><span class="std std-ref">Arcs</span></a> dataframe. If provided, all arcs will be displayed with this type.  Valid options are ‘solid’, ‘dotted’, or ‘dashed’.  See <a class="reference internal" href="leaflet_style.html#leaflet-style"><span class="std std-ref">Leaflet Style</span></a> for more information.</p>
</dd>
<dt>leafletOpacity: float in [0, 1], Optional, default as None</dt><dd><p>Overrides the <cite>leafletOpacity</cite> column of the input <a class="reference internal" href="arcs.html#arcs"><span class="std std-ref">Arcs</span></a> dataframe.  If provided, each arc will be displayed with this opacity.  Valid values are in the range from 0 (invisible) to 1 (no transparency).</p>
</dd>
<dt>useArrows: boolean, Optional, default as None</dt><dd><p>Overrides the <cite>useArrows</cite> column of the input <a class="reference internal" href="arcs.html#arcs"><span class="std std-ref">Arcs</span></a> dataframe. Indicates whether arrows should be shown on the route when displayed in Leaflet.</p>
</dd>
<dt>cesiumColor: string, Optional, default as None</dt><dd><p>Overrides the <cite>cesiumColor</cite> column of the input <a class="reference internal" href="arcs.html#arcs"><span class="std std-ref">Arcs</span></a> dataframe.  This will define the color of all arcs displayed in Cesium.  See <a class="reference internal" href="cesium_style.html#cesium-style"><span class="std std-ref">Cesium Style</span></a> for the collection of available colors.</p>
</dd>
<dt>cesiumWeight: int, Optional, default as None</dt><dd><p>Overrides the <cite>cesiumWeight</cite> column of the input <a class="reference internal" href="arcs.html#arcs"><span class="std std-ref">Arcs</span></a> dataframe. This will define the weight (in pixels) of all arcs displayed in Cesium. See <a class="reference internal" href="cesium_style.html#cesium-style"><span class="std std-ref">Cesium Style</span></a> for more information.</p>
</dd>
<dt>cesiumStyle: string, Optional, default as None</dt><dd><p>Overrides the <cite>cesiumStyle</cite> column of the input <a class="reference internal" href="arcs.html#arcs"><span class="std std-ref">Arcs</span></a> dataframe. This will define the style of all arcs displayed in Cesium. See <a class="reference internal" href="cesium_style.html#cesium-style"><span class="std std-ref">Cesium Style</span></a> for available options.</p>
</dd>
<dt>cesiumOpacity: float in [0, 1], Optional, default as None</dt><dd><p>Overrides the <cite>cesiumOpacity</cite> column of the input <a class="reference internal" href="arcs.html#arcs"><span class="std std-ref">Arcs</span></a> dataframe.  This will define the opacity of all arcs displayed in Cesium.  See <a class="reference internal" href="cesium_style.html#cesium-style"><span class="std std-ref">Cesium Style</span></a> for more information.</p>
</dd>
<dt>dataProvider: string, Conditional, default as None</dt><dd><p>Specifies the data source to be used for obtaining the shapepoints. See <a class="reference internal" href="dataproviders.html#data-providers"><span class="std std-ref">Data Providers</span></a> for options and requirements.</p>
</dd>
<dt>dataProviderArgs: dictionary, Conditional, default as None</dt><dd><p>For some data providers, additional parameters are required (e.g., API keys or database names). See <a class="reference internal" href="dataproviders.html#data-providers"><span class="std std-ref">Data Providers</span></a> for the additional arguments required for each supported data provider.</p>
</dd>
</dl>
<dl class="simple">
<dt><a class="reference internal" href="assignments.html#assignments"><span class="std std-ref">Assignments</span></a> dataframe</dt><dd><p>An <a class="reference internal" href="assignments.html#assignments"><span class="std std-ref">Assignments</span></a> dataframe containing an ordered sequence of paired GPS coordinates describing the collection of straight-line segments required to travel through all arcs in the provided <a class="reference internal" href="arcs.html#arcs"><span class="std std-ref">Arcs</span></a> dataframe.</p>
</dd>
</dl>
<dl>
<dt>Import veroviz and check if it’s the latest version:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">veroviz</span> <span class="k">as</span> <span class="nn">vrv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vrv</span><span class="o">.</span><span class="n">checkVersion</span><span class="p">()</span>
</pre></div>
</div>
</dd>
<dt>Generate arcs from a given ordered list of coordinates:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">arcs</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">createArcsFromLocSeq</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">locSeq</span><span class="o">=</span><span class="p">[[</span><span class="mf">42.3538</span><span class="p">,</span> <span class="o">-</span><span class="mf">78.4253</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span>
<span class="gp">... </span>            <span class="p">[</span><span class="mf">42.3465</span><span class="p">,</span> <span class="o">-</span><span class="mf">78.4234</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span>
<span class="gp">... </span>            <span class="p">[</span><span class="mf">42.3343</span><span class="p">,</span> <span class="o">-</span><span class="mf">78.4146</span><span class="p">,</span> <span class="mi">40</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arcs</span>
</pre></div>
</div>
</dd>
<dt>Display the arcs on a Leaflet map:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">vrv</span><span class="o">.</span><span class="n">createLeaflet</span><span class="p">(</span><span class="n">arcs</span><span class="o">=</span><span class="n">arcs</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>The following examples assume the use of ORS as the data provider. If you have saved your API key as an environment variable, you may use <cite>os.environ</cite> to access it:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ORS_API_KEY</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;ORSKEY&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Otherwise, you may specify your key here:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># ORS_API_KEY = &#39;YOUR_ORS_KEY_GOES_HERE&#39;</span>
</pre></div>
</div>
</dd>
<dt>Generate an assignments dataframe from the arcs dataframe:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">myAssignments</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">createAssignmentsFromArcs2D</span><span class="p">(</span>
<span class="gp">... </span>     <span class="n">arcs</span>             <span class="o">=</span> <span class="n">arcs</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">modelFile</span>        <span class="o">=</span> <span class="s1">&#39;veroviz/models/car_blue.gltf&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">routeType</span>        <span class="o">=</span> <span class="s1">&#39;fastest&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">dataProvider</span>     <span class="o">=</span> <span class="s1">&#39;ors-online&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">dataProviderArgs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;APIkey&#39;</span><span class="p">:</span> <span class="n">ORS_API_KEY</span><span class="p">},</span>
<span class="gp">... </span>    <span class="n">leafletColor</span>     <span class="o">=</span> <span class="s1">&#39;blue&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myAssignments</span>
</pre></div>
</div>
</dd>
</dl>
</div></blockquote>
<dl>
<dt>Display the assignments on a map:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">vrv</span><span class="o">.</span><span class="n">createLeaflet</span><span class="p">(</span><span class="n">arcs</span><span class="o">=</span><span class="n">myAssignments</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="veroviz.createAssignments.createAssignmentsFromLocSeq2D">
<code class="sig-name descname">createAssignmentsFromLocSeq2D</code><span class="sig-paren">(</span><em class="sig-param">initAssignments=None</em>, <em class="sig-param">locSeq=None</em>, <em class="sig-param">serviceTimeSec=0.0</em>, <em class="sig-param">odID=1</em>, <em class="sig-param">objectID=None</em>, <em class="sig-param">modelFile=None</em>, <em class="sig-param">modelScale=100</em>, <em class="sig-param">modelMinPxSize=75</em>, <em class="sig-param">startTimeSec=0.0</em>, <em class="sig-param">expDurationArgs=None</em>, <em class="sig-param">routeType='euclidean2D'</em>, <em class="sig-param">speedMPS=None</em>, <em class="sig-param">leafletColor='orange'</em>, <em class="sig-param">leafletWeight=3</em>, <em class="sig-param">leafletStyle='solid'</em>, <em class="sig-param">leafletOpacity=0.8</em>, <em class="sig-param">useArrows=True</em>, <em class="sig-param">cesiumColor='Cesium.Color.ORANGE'</em>, <em class="sig-param">cesiumWeight=3</em>, <em class="sig-param">cesiumStyle='solid'</em>, <em class="sig-param">cesiumOpacity=0.8</em>, <em class="sig-param">dataProvider=None</em>, <em class="sig-param">dataProviderArgs=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/veroviz/createAssignments.html#createAssignmentsFromLocSeq2D"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#veroviz.createAssignments.createAssignmentsFromLocSeq2D" title="Permalink to this definition">¶</a></dt>
<dd><p>This function generates an “assignments” dataframe containing all of the “shapepoints” between successive locations, including timestamps indicating the departure and arrival times for each shapepoint. Shapepoints are pairs of GPS coordinates that are connected by straight lines.  For a particular origin and destination, numerous individual shapepoints can be combined to define a travel route along a road network.</p>
<p class="rubric">Notes</p>
<p>This function is for vehicles traveling on a ground plane (2-dimensional).  For vehicles requiring an altitude component (e.g., drones), a 3D version of this function is provided by <cite>createAssignmentsFromLocSeq3D()</cite>.</p>
<p>This function creates an assignments dataframe from a sequence of [lat, lon] locations.  Similar functions are available to create an assignments dataframe from an arcs dataframe (<cite>createShapepointsFromArcs2D()</cite>) or from a sequence of nodes (<cite>createShapepointsFromNodeSeq2D()</cite>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>initAssignments</strong> (<a class="reference internal" href="assignments.html#assignments"><span class="std std-ref">Assignments</span></a> dataframe, Optional, default as None) – If provided, the function will append rows to this dataframe.</p></li>
<li><p><strong>locSeq</strong> (<em>list of lists</em><em>, </em><em>Required</em><em>, </em><em>default as None</em>) – An ordered list of locations that will be converted into an <a class="reference internal" href="arcs.html#arcs"><span class="std std-ref">Arcs</span></a> dataframe. The list should be formated as [[lat1, lon1], [lat2, lon2], …, [latn, lonn]] or [[lat1, lon1, alt1], [lat2, lon2, alt2], …, [latn, lonn, altn]].  If provided, altitude values will be ignored.</p></li>
<li><p><strong>serviceTimeSec</strong> (<em>float</em><em>, </em><em>Optional</em><em>, </em><em>default as 0.0</em>) – Specifies a duration, in seconds, that the vehicle will be stationary at each destination node.  This service (stationary) time will not be applied to the first node in <cite>nodeSeq</cite>.</p></li>
<li><p><strong>odID</strong> (<em>int</em><em>, </em><em>Optional</em><em>, </em><em>default as 1</em>) – This field allows grouping of dataframe rows according to common origin/destination pairs.  Arc segments which are part of the same origin/destination share the same odID.</p></li>
<li><p><strong>objectID</strong> (<em>int/string</em><em>, </em><em>Optional</em><em>, </em><em>default as None</em>) – A descriptive name or index for a particular vehicle or object (e.g., ‘truck 1’, or ‘red car’).</p></li>
<li><p><strong>modelFile</strong> (<em>string</em><em>, </em><em>Optional</em><em>, </em><em>default as None</em>) – The relative path and filename of the 3D model associated with this object.  The 3D model, typically in the format of <cite>.gltf</cite> or <cite>.glb</cite>, will be visualized in Cesium.  The path should be relative to the directory where Cesium is installed (i.e., the <cite>modelFile</cite> should exist within the Cesium root directory).</p></li>
<li><p><strong>startTimeSec</strong> (<em>float</em><em>, </em><em>Optional</em><em>, </em><em>default as 0.0</em>) – The time, in seconds, at which the vehicle may leave the starting location.</p></li>
<li><p><strong>expDurationArgs</strong> (<em>dictionary</em><em>, </em><em>Optional</em><em>, </em><em>default as None</em>) – Sometimes there are inconsistencies between the travel times specified in the turn-by-turn navigation (i.e., shapepoints) and the travel matrices (i.e., from the getTimeDist functions).  The <cite>expDurationArgs</cite> field may take two different values.
First, if <cite>expDurationArgs</cite> is <cite>None</cite> (default), the travel times will be based solely on the turn-by-turn times.  Second, if <cite>expDurationArgs</cite> is a dictionary with a key of <cite>‘getTravelTimes’</cite> and a corresponding value of <cite>True</cite>, then this function will call the <cite>getTimeDist2D()</cite> function for each origin/destination pair.  In this case, all shapepoint travel times will be adjusted/redistributed to match the resulting values.</p></li>
<li><p><strong>routeType</strong> (<em>string</em><em>, </em><em>Optional</em><em>, </em><em>default as 'euclidean2D'</em>) – This describes a characteristic of the travel mode.  Possible values are: ‘euclidean2D’, ‘manhattan’, ‘fastest’, ‘shortest’, ‘pedestrian’, ‘cycling’, and ‘truck’.  The ‘euclidean2D’ and ‘manhattan’ options are calculated directly from GPS coordinates, without a road network.  Neither of these two options require a data provider.  However, the other options rely on road network information and require a data provider.  Furthermore, some of those other options are not supported by all data providers.  See <a class="reference internal" href="dataproviders.html#data-providers"><span class="std std-ref">Data Providers</span></a> for details.</p></li>
<li><p><strong>speedMPS</strong> (<em>float</em><em>, </em><em>Conditional</em><em>, </em><em>default as None</em>) – Speed of the vehicle, in units of meters per second. For route types that are not road-network based (i.e., ‘euclidean2D’ and ‘manhattan’), this field is required to calculate travel times. Otherwise, if a route type already incorporates travel speeds from road network data, (i.e., ‘fastest’, ‘shortest’, and ‘pedestrain’), this input argument may be ignored.  If provided, <cite>speedMPS</cite> will override travel speed data used by the route type option.</p></li>
<li><p><strong>leafletColor</strong> (<em>string</em><em>, </em><em>Optional</em><em>, </em><em>default as &quot;orange&quot;</em>) – The color of the route when displayed in Leaflet.  See <a class="reference internal" href="leaflet_style.html#leaflet-style"><span class="std std-ref">Leaflet Style</span></a> for a list of available colors.</p></li>
<li><p><strong>leafletWeight</strong> (<em>int</em><em>, </em><em>Optional</em><em>, </em><em>default as 3</em>) – The pixel width of the route when displayed in Leaflet.</p></li>
<li><p><strong>leafletStyle</strong> (<em>string</em><em>, </em><em>Optional</em><em>, </em><em>default as 'solid'</em>) – The line style of the route when displayed in Leaflet.  Valid options are ‘solid’, ‘dotted’, and ‘dashed’. See <a class="reference internal" href="leaflet_style.html#leaflet-style"><span class="std std-ref">Leaflet Style</span></a> for more information.</p></li>
<li><p><strong>leafletOpacity</strong> (<em>float in</em><em> [</em><em>0</em><em>, </em><em>1</em><em>]</em><em>, </em><em>Optional</em><em>, </em><em>default as 0.8</em>) – The opacity of the route when displayed in Leaflet. Valid values are in the range from 0 (invisible) to 1 (no transparency).</p></li>
<li><p><strong>useArrows</strong> (<em>bool</em><em>, </em><em>Optional</em><em>, </em><em>default as True</em>) – Indicates whether arrows should be shown on the route when displayed in Leaflet.</p></li>
<li><p><strong>modelScale</strong> (<em>int</em><em>, </em><em>Optional</em><em>, </em><em>default as 100</em>) – The scale of the 3D model (specified by the <cite>modelFile</cite> argument) when displayed in Cesium, such that 100 represents 100%.</p></li>
<li><p><strong>modelMinPxSize</strong> (<em>int</em><em>, </em><em>Optional</em><em>, </em><em>default as 75</em>) – The minimum pixel size of the 3D model (specified by the <cite>modelFile</cite> argument) when displayed in Cesium.  When zooming out, the model will not be smaller than this size; zooming in can result in a larger model.</p></li>
<li><p><strong>cesiumColor</strong> (<em>string</em><em>, </em><em>Optional</em><em>, </em><em>default as &quot;Cesium.Color.ORANGE&quot;</em>) – The color of the route when displayed in Cesium.  See <a class="reference internal" href="cesium_style.html#cesium-style"><span class="std std-ref">Cesium Style</span></a> for a list of available colors.</p></li>
<li><p><strong>cesiumWeight</strong> (<em>int</em><em>, </em><em>Optional</em><em>, </em><em>default as 3</em>) – The pixel width of the route when displayed in Cesium.</p></li>
<li><p><strong>cesiumStyle</strong> (<em>string</em><em>, </em><em>Optional</em><em>, </em><em>default as 'solid'</em>) – The line style of the route when displayed in Cesium.  Valid options are ‘solid’, ‘dotted’, and ‘dashed’. See <a class="reference internal" href="cesium_style.html#cesium-style"><span class="std std-ref">Cesium Style</span></a> for more information.</p></li>
<li><p><strong>cesiumOpacity</strong> (<em>float in</em><em> [</em><em>0</em><em>, </em><em>1</em><em>]</em><em>, </em><em>Optional</em><em>, </em><em>default as 0.8</em>) – The opacity of the route when displayed in Cesium. Valid values are in the range from 0 (invisible) to 1 (no transparency).</p></li>
<li><p><strong>dataProvider</strong> (<em>string</em><em>, </em><em>Conditional</em><em>, </em><em>default as None</em>) – Specifies the data source to be used for obtaining the shapepoints. See <a class="reference internal" href="dataproviders.html#data-providers"><span class="std std-ref">Data Providers</span></a> for options and requirements.</p></li>
<li><p><strong>dataProviderArgs</strong> (<em>dictionary</em><em>, </em><em>Conditional</em><em>, </em><em>default as None</em>) – For some data providers, additional parameters are required (e.g., API keys or database names). See <a class="reference internal" href="dataproviders.html#data-providers"><span class="std std-ref">Data Providers</span></a> for the additional arguments required for each supported data provider.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An <a class="reference internal" href="assignments.html#assignments"><span class="std std-ref">Assignments</span></a> dataframe containing an ordered sequence of paired GPS coordinates describing the collection of straight-line segments required to travel through the provided sequence of locations.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="assignments.html#assignments"><span class="std std-ref">Assignments</span></a> dataframe</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<dl>
<dt>Import veroviz and check if it’s the latest version:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">veroviz</span> <span class="k">as</span> <span class="nn">vrv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vrv</span><span class="o">.</span><span class="n">checkVersion</span><span class="p">()</span>
</pre></div>
</div>
</dd>
<dt>The following examples assume the use of ORS as the data provider. If you have saved your API key as an environment variable, you may use <cite>os.environ</cite> to access it:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ORS_API_KEY</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;ORSKEY&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Otherwise, you may specify your key here:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># ORS_API_KEY = &#39;YOUR_ORS_KEY_GOES_HERE&#39;</span>
</pre></div>
</div>
</dd>
<dt>Specify a sequence of [lat, lon] or [lat, lon, alt] locations.</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">locs</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="p">[</span><span class="mf">42.1538</span><span class="p">,</span> <span class="o">-</span><span class="mf">78.4253</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span>
<span class="gp">... </span>    <span class="p">[</span><span class="mf">42.3465</span><span class="p">,</span> <span class="o">-</span><span class="mf">78.6234</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span>
<span class="gp">... </span>    <span class="p">[</span><span class="mf">42.6343</span><span class="p">,</span> <span class="o">-</span><span class="mf">78.1146</span><span class="p">,</span> <span class="mi">40</span><span class="p">],</span>
<span class="gp">... </span>    <span class="p">[</span><span class="mf">42.1538</span><span class="p">,</span> <span class="o">-</span><span class="mf">78.4253</span><span class="p">,</span> <span class="mi">30</span><span class="p">]]</span>
</pre></div>
</div>
</dd>
<dt>Example 1 - A simple example using Euclidean travel, and no service times.  The assignments dataframe will have 3 rows.</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">assignmentsDF</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">createAssignmentsFromLocSeq2D</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">locSeq</span>         <span class="o">=</span> <span class="n">locs</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">serviceTimeSec</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">objectID</span>       <span class="o">=</span> <span class="s1">&#39;Blue Car&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">modelFile</span>      <span class="o">=</span> <span class="s1">&#39;veroviz/models/car_blue.gltf&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">routeType</span>      <span class="o">=</span> <span class="s1">&#39;euclidean2D&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">speedMPS</span>       <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assignmentsDF</span>
</pre></div>
</div>
</dd>
<dt>Example 2 - The vehicle will follow the road network, resulting in an assignments dataframe with significantly more than 3 rows.  The vehicle will remain stationary at the destination locations.  The travel time for each origin/destination pair will be calculated separately.</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Make our car wait for 65 seconds before starting:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assignmentsDF</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">addStaticAssignment</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">odID</span>         <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">objectID</span>     <span class="o">=</span> <span class="s1">&#39;Blue Car&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">modelFile</span>    <span class="o">=</span> <span class="s1">&#39;veroviz/models/car_blue.gltf&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">loc</span>          <span class="o">=</span> <span class="n">locs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">startTimeSec</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">endTimeSec</span>   <span class="o">=</span> <span class="mf">65.0</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># This example includes all of the available input arguments:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">newAssignmentsDF</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">createAssignmentsFromLocSeq2D</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">initAssignments</span>  <span class="o">=</span> <span class="n">assignmentsDF</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">locSeq</span>           <span class="o">=</span> <span class="n">locs</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">serviceTimeSec</span>   <span class="o">=</span> <span class="mf">20.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">odID</span>             <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">objectID</span>         <span class="o">=</span> <span class="s1">&#39;Blue Car&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">modelFile</span>        <span class="o">=</span> <span class="s1">&#39;veroviz/models/car_blue.gltf&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">modelScale</span>       <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">modelMinPxSize</span>   <span class="o">=</span> <span class="mi">75</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">startTimeSec</span>     <span class="o">=</span> <span class="mf">65.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">expDurationArgs</span>  <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;getTravelTimes&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
<span class="gp">... </span>    <span class="n">routeType</span>        <span class="o">=</span> <span class="s1">&#39;fastest&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">speedMPS</span>         <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">leafletColor</span>     <span class="o">=</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">leafletWeight</span>    <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">leafletStyle</span>     <span class="o">=</span> <span class="s1">&#39;dashed&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">leafletOpacity</span>   <span class="o">=</span> <span class="mf">0.8</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">useArrows</span>        <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">cesiumColor</span>      <span class="o">=</span> <span class="s1">&#39;Cesium.Color.BLUE&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">cesiumWeight</span>     <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">cesiumStyle</span>      <span class="o">=</span> <span class="s1">&#39;solid&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">cesiumOpacity</span>    <span class="o">=</span> <span class="mf">0.8</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">dataProvider</span>     <span class="o">=</span> <span class="s1">&#39;ORS-online&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">dataProviderArgs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;APIkey&#39;</span> <span class="p">:</span> <span class="n">ORS_API_KEY</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">newAssignmentsDF</span>
</pre></div>
</div>
</dd>
<dt>Generate a <a class="reference internal" href="nodes.html#nodes"><span class="std std-ref">Nodes</span></a> dataframe from our first three locations (the fourth location is a duplicate of the first).  See <a class="reference internal" href="veroviz.generateNodes.html#veroviz.generateNodes.generateNodes" title="veroviz.generateNodes.generateNodes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">generateNodes()</span></code></a> for other methods to generate “nodes” dataframes.</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">exampleNodes</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">createNodesFromLocs</span><span class="p">(</span><span class="n">locs</span><span class="o">=</span><span class="n">locs</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
</dd>
<dt>View the assignments in Leaflet:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">vrv</span><span class="o">.</span><span class="n">createLeaflet</span><span class="p">(</span><span class="n">arcs</span><span class="o">=</span><span class="n">newAssignmentsDF</span><span class="p">,</span> <span class="n">nodes</span><span class="o">=</span><span class="n">exampleNodes</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>View the assignments in Cesium:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">vrv</span><span class="o">.</span><span class="n">createCesium</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">assignments</span> <span class="o">=</span> <span class="n">newAssignmentsDF</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">nodes</span>       <span class="o">=</span> <span class="n">exampleNodes</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">startTime</span>   <span class="o">=</span> <span class="s1">&#39;08:00:00&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">cesiumDir</span>   <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;CESIUMDIR&#39;</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">problemDir</span>  <span class="o">=</span> <span class="s1">&#39;createAssignments_example&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="veroviz.createAssignments.createAssignmentsFromNodeSeq2D">
<code class="sig-name descname">createAssignmentsFromNodeSeq2D</code><span class="sig-paren">(</span><em class="sig-param">initAssignments=None</em>, <em class="sig-param">nodeSeq=None</em>, <em class="sig-param">nodes=None</em>, <em class="sig-param">serviceTimeSec=0.0</em>, <em class="sig-param">odID=1</em>, <em class="sig-param">objectID=None</em>, <em class="sig-param">modelFile=None</em>, <em class="sig-param">modelScale=100</em>, <em class="sig-param">modelMinPxSize=75</em>, <em class="sig-param">startTimeSec=0.0</em>, <em class="sig-param">expDurationArgs=None</em>, <em class="sig-param">routeType='euclidean2D'</em>, <em class="sig-param">speedMPS=None</em>, <em class="sig-param">leafletColor='orange'</em>, <em class="sig-param">leafletWeight=3</em>, <em class="sig-param">leafletStyle='solid'</em>, <em class="sig-param">leafletOpacity=0.8</em>, <em class="sig-param">useArrows=True</em>, <em class="sig-param">cesiumColor='Cesium.Color.ORANGE'</em>, <em class="sig-param">cesiumWeight=3</em>, <em class="sig-param">cesiumStyle='solid'</em>, <em class="sig-param">cesiumOpacity=0.8</em>, <em class="sig-param">dataProvider=None</em>, <em class="sig-param">dataProviderArgs=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/veroviz/createAssignments.html#createAssignmentsFromNodeSeq2D"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#veroviz.createAssignments.createAssignmentsFromNodeSeq2D" title="Permalink to this definition">¶</a></dt>
<dd><p>This function generates an “assignments” dataframe containing all of the “shapepoints” between successive node locations, including timestamps indicating the departure and arrival times for each shapepoint. Shapepoints are pairs of GPS coordinates that are connected by straight lines.  For a particular origin and destination, numerous individual shapepoints can be combined to define a travel route along a road network.</p>
<p class="rubric">Notes</p>
<p>This function is for vehicles traveling on a ground plane (2-dimensional).  For vehicles requiring an altitude component (e.g., drones), a 3D version of this function is provided by <cite>createAssignmentsFromNodeSeq3D()</cite>.</p>
<p>This function creates an assignments dataframe from a sequence of nodes.  Similar functions are available to create an assignments dataframe from an arcs dataframe (<cite>createShapepointsFromArcs2D()</cite>) or from a sequence of locations (<cite>createShapepointsFromLocSeq2D()</cite>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>initAssignments</strong> (<a class="reference internal" href="assignments.html#assignments"><span class="std std-ref">Assignments</span></a> dataframe, Optional, default as None) – If provided, the function will append rows to this dataframe.</p></li>
<li><p><strong>nodeSeq</strong> (<em>list</em><em>, </em><em>Required</em>) – An ordered list of node IDs.  These IDs must be included in the <cite>id</cite> column of the <a class="reference internal" href="nodes.html#nodes"><span class="std std-ref">Nodes</span></a> dataframe specified in the <cite>nodes</cite> input argument to this function. The format for <cite>nodeSeq</cite> is [node_id_1, node_id_2, …].</p></li>
<li><p><strong>nodes</strong> (<a class="reference internal" href="nodes.html#nodes"><span class="std std-ref">Nodes</span></a>, Required) – A <a class="reference internal" href="nodes.html#nodes"><span class="std std-ref">Nodes</span></a> dataframe, which must contain the individual node IDs specified in the <cite>nodeSeq</cite> input argument.</p></li>
<li><p><strong>serviceTimeSec</strong> (<em>float</em><em>, </em><em>Optional</em><em>, </em><em>default as 0.0</em>) – Specifies a duration, in seconds, that the vehicle will be stationary at each destination node.  This service (stationary) time will not be applied to the first node in <cite>nodeSeq</cite>.</p></li>
<li><p><strong>odID</strong> (<em>int</em><em>, </em><em>Optional</em><em>, </em><em>default as 1</em>) – This field allows grouping of dataframe rows according to common origin/destination pairs.  Arc segments which are part of the same origin/destination share the same odID.</p></li>
<li><p><strong>objectID</strong> (<em>int/string</em><em>, </em><em>Optional</em><em>, </em><em>default as None</em>) – A descriptive name or index for a particular vehicle or object (e.g., ‘truck 1’, or ‘red car’).</p></li>
<li><p><strong>modelFile</strong> (<em>string</em><em>, </em><em>Optional</em><em>, </em><em>default as None</em>) – The relative path and filename of the 3D model associated with this object.  The 3D model, typically in the format of <cite>.gltf</cite> or <cite>.glb</cite>, will be visualized in Cesium.  The path should be relative to the directory where Cesium is installed (i.e., the <cite>modelFile</cite> should exist within the Cesium root directory).</p></li>
<li><p><strong>startTimeSec</strong> (<em>float</em><em>, </em><em>Optional</em><em>, </em><em>default as 0.0</em>) – The time, in seconds, at which the vehicle may leave the starting location.</p></li>
<li><p><strong>expDurationArgs</strong> (<em>dictionary</em><em>, </em><em>Optional</em><em>, </em><em>default as None</em>) – Sometimes there are inconsistencies between the travel times specified in the turn-by-turn navigation (i.e., shapepoints) and the travel matrices (i.e., from the getTimeDist functions).  The <cite>expDurationArgs</cite> field may take three different values.
First, if <cite>expDurationArgs</cite> is <cite>None</cite> (default), the travel times will be based solely on the turn-by-turn times.  Second, if <cite>expDurationArgs</cite> is a dictionary with a key of <cite>‘timeSecDict’</cite> and a corresponding value of a time dictionary (as output by <cite>getTimeDist2D()</cite>), then all shapepoint travel time will be adjusted/redistributed to match the values in the time dictionary.  Finally, if <cite>expDurationArgs</cite> is a dictionary with a key of <cite>‘getTravelTimes’</cite> and a corresponding value of <cite>True</cite>, then this function will call the <cite>getTimeDist2D()</cite> function for each origin/destination pair.  In this case, all shapepoint travel times will be adjusted/redistributed to match the resulting values.</p></li>
<li><p><strong>routeType</strong> (<em>string</em><em>, </em><em>Optional</em><em>, </em><em>default as 'euclidean2D'</em>) – This describes a characteristic of the travel mode.  Possible values are: ‘euclidean2D’, ‘manhattan’, ‘fastest’, ‘shortest’, ‘pedestrian’, ‘cycling’, and ‘truck’.  The ‘euclidean2D’ and ‘manhattan’ options are calculated directly from GPS coordinates, without a road network.  Neither of these two options require a data provider.  However, the other options rely on road network information and require a data provider.  Furthermore, some of those other options are not supported by all data providers.  See <a class="reference internal" href="dataproviders.html#data-providers"><span class="std std-ref">Data Providers</span></a> for details.</p></li>
<li><p><strong>speedMPS</strong> (<em>float</em><em>, </em><em>Conditional</em><em>, </em><em>default as None</em>) – Speed of the vehicle, in units of meters per second. For route types that are not road-network based (i.e., ‘euclidean2D’ and ‘manhattan’), this field is required to calculate travel times. Otherwise, if a route type already incorporates travel speeds from road network data, (i.e., ‘fastest’, ‘shortest’, and ‘pedestrain’), this input argument may be ignored.  If provided, <cite>speedMPS</cite> will override travel speed data used by the route type option.</p></li>
<li><p><strong>leafletColor</strong> (<em>string</em><em>, </em><em>Optional</em><em>, </em><em>default as &quot;orange&quot;</em>) – The color of the route when displayed in Leaflet.  See <a class="reference internal" href="leaflet_style.html#leaflet-style"><span class="std std-ref">Leaflet Style</span></a> for a list of available colors.</p></li>
<li><p><strong>leafletWeight</strong> (<em>int</em><em>, </em><em>Optional</em><em>, </em><em>default as 3</em>) – The pixel width of the route when displayed in Leaflet.</p></li>
<li><p><strong>leafletStyle</strong> (<em>string</em><em>, </em><em>Optional</em><em>, </em><em>default as 'solid'</em>) – The line style of the route when displayed in Leaflet.  Valid options are ‘solid’, ‘dotted’, and ‘dashed’. See <a class="reference internal" href="leaflet_style.html#leaflet-style"><span class="std std-ref">Leaflet Style</span></a> for more information.</p></li>
<li><p><strong>leafletOpacity</strong> (<em>float in</em><em> [</em><em>0</em><em>, </em><em>1</em><em>]</em><em>, </em><em>Optional</em><em>, </em><em>default as 0.8</em>) – The opacity of the route when displayed in Leaflet. Valid values are in the range from 0 (invisible) to 1 (no transparency).</p></li>
<li><p><strong>useArrows</strong> (<em>bool</em><em>, </em><em>Optional</em><em>, </em><em>default as True</em>) – Indicates whether arrows should be shown on the route when displayed in Leaflet.</p></li>
<li><p><strong>modelScale</strong> (<em>int</em><em>, </em><em>Optional</em><em>, </em><em>default as 100</em>) – The scale of the 3D model (specified by the <cite>modelFile</cite> argument) when displayed in Cesium, such that 100 represents 100%.</p></li>
<li><p><strong>modelMinPxSize</strong> (<em>int</em><em>, </em><em>Optional</em><em>, </em><em>default as 75</em>) – The minimum pixel size of the 3D model (specified by the <cite>modelFile</cite> argument) when displayed in Cesium.  When zooming out, the model will not be smaller than this size; zooming in can result in a larger model.</p></li>
<li><p><strong>cesiumColor</strong> (<em>string</em><em>, </em><em>Optional</em><em>, </em><em>default as &quot;Cesium.Color.ORANGE&quot;</em>) – The color of the route when displayed in Cesium.  See <a class="reference internal" href="cesium_style.html#cesium-style"><span class="std std-ref">Cesium Style</span></a> for a list of available colors.</p></li>
<li><p><strong>cesiumWeight</strong> (<em>int</em><em>, </em><em>Optional</em><em>, </em><em>default as 3</em>) – The pixel width of the route when displayed in Cesium.</p></li>
<li><p><strong>cesiumStyle</strong> (<em>string</em><em>, </em><em>Optional</em><em>, </em><em>default as 'solid'</em>) – The line style of the route when displayed in Cesium.  Valid options are ‘solid’, ‘dotted’, and ‘dashed’. See <a class="reference internal" href="cesium_style.html#cesium-style"><span class="std std-ref">Cesium Style</span></a> for more information.</p></li>
<li><p><strong>cesiumOpacity</strong> (<em>float in</em><em> [</em><em>0</em><em>, </em><em>1</em><em>]</em><em>, </em><em>Optional</em><em>, </em><em>default as 0.8</em>) – The opacity of the route when displayed in Cesium. Valid values are in the range from 0 (invisible) to 1 (no transparency).</p></li>
<li><p><strong>dataProvider</strong> (<em>string</em><em>, </em><em>Conditional</em><em>, </em><em>default as None</em>) – Specifies the data source to be used for obtaining the shapepoints. See <a class="reference internal" href="dataproviders.html#data-providers"><span class="std std-ref">Data Providers</span></a> for options and requirements.</p></li>
<li><p><strong>dataProviderArgs</strong> (<em>dictionary</em><em>, </em><em>Conditional</em><em>, </em><em>default as None</em>) – For some data providers, additional parameters are required (e.g., API keys or database names). See <a class="reference internal" href="dataproviders.html#data-providers"><span class="std std-ref">Data Providers</span></a> for the additional arguments required for each supported data provider.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An <a class="reference internal" href="assignments.html#assignments"><span class="std std-ref">Assignments</span></a> dataframe containing an ordered sequence of paired GPS coordinates describing the collection of straight-line segments required to travel through the provided sequence of nodes.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="assignments.html#assignments"><span class="std std-ref">Assignments</span></a> dataframe</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<dl>
<dt>Import veroviz and check if it’s the latest version:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">veroviz</span> <span class="k">as</span> <span class="nn">vrv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vrv</span><span class="o">.</span><span class="n">checkVersion</span><span class="p">()</span>
</pre></div>
</div>
</dd>
<dt>The following examples assume the use of ORS as the data provider. If you have saved your API key as an environment variable, you may use <cite>os.environ</cite> to access it:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ORS_API_KEY</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;ORSKEY&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Otherwise, you may specify your key here:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># ORS_API_KEY = &#39;YOUR_ORS_KEY_GOES_HERE&#39;</span>
</pre></div>
</div>
</dd>
<dt>Generate a <a class="reference internal" href="nodes.html#nodes"><span class="std std-ref">Nodes</span></a> dataframe from a list of coordinates.  See <a class="reference internal" href="veroviz.generateNodes.html#veroviz.generateNodes.generateNodes" title="veroviz.generateNodes.generateNodes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">generateNodes()</span></code></a> for other methods to generate “nodes” dataframes.</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">locs</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="p">[</span><span class="mf">42.1538</span><span class="p">,</span> <span class="o">-</span><span class="mf">78.4253</span><span class="p">],</span>
<span class="gp">... </span>    <span class="p">[</span><span class="mf">42.3465</span><span class="p">,</span> <span class="o">-</span><span class="mf">78.6234</span><span class="p">],</span>
<span class="gp">... </span>    <span class="p">[</span><span class="mf">42.6343</span><span class="p">,</span> <span class="o">-</span><span class="mf">78.1146</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exampleNodes</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">createNodesFromLocs</span><span class="p">(</span><span class="n">locs</span><span class="o">=</span><span class="n">locs</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>Example 1 - A simple example using Euclidean travel, and no service times.  The assignments dataframe will have 3 rows.</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">assignmentsDF</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">createAssignmentsFromNodeSeq2D</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">nodeSeq</span>        <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">nodes</span>          <span class="o">=</span> <span class="n">exampleNodes</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">serviceTimeSec</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">objectID</span>       <span class="o">=</span> <span class="s1">&#39;Blue Car&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">modelFile</span>      <span class="o">=</span> <span class="s1">&#39;veroviz/models/car_blue.gltf&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">routeType</span>      <span class="o">=</span> <span class="s1">&#39;euclidean2D&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">speedMPS</span>       <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assignmentsDF</span>
</pre></div>
</div>
</dd>
<dt>Example 2 - The vehicle will follow the road network, resulting in an assignments dataframe with significantly more than 3 rows.  The vehicle will remain stationary at nodes 3, 2, and 1 (the destination nodes).  The travel time for each origin/destination pair will be calculated separately.</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">assignmentsDF</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">createAssignmentsFromNodeSeq2D</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">initAssignments</span>  <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">nodeSeq</span>          <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">nodes</span>            <span class="o">=</span> <span class="n">exampleNodes</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">serviceTimeSec</span>   <span class="o">=</span> <span class="mf">20.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">odID</span>             <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">objectID</span>         <span class="o">=</span> <span class="s1">&#39;Blue Car&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">modelFile</span>        <span class="o">=</span> <span class="s1">&#39;veroviz/models/car_blue.gltf&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">expDurationArgs</span>  <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;getTravelTimes&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
<span class="gp">... </span>    <span class="n">routeType</span>        <span class="o">=</span> <span class="s1">&#39;fastest&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">dataProvider</span>     <span class="o">=</span> <span class="s1">&#39;ORS-online&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">dataProviderArgs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;APIkey&#39;</span> <span class="p">:</span> <span class="n">ORS_API_KEY</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assignmentsDF</span>
</pre></div>
</div>
</dd>
<dt>Example 3 - The vehicle will first wait at the starting location (node 1) for 65 seconds.  It will then visit nodes 3 and 2 before returning to node 1.  At each of those nodes, the vehicle will remain stationary for a 20-second service time.  The travel time between each pair of nodes will be determined by the times in the <cite>timeSec</cite> matrix.</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Generate a matrix of travel times:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">timeSec</span><span class="p">,</span> <span class="n">distMeters</span><span class="p">]</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">getTimeDist2D</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">nodes</span>            <span class="o">=</span> <span class="n">exampleNodes</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">matrixType</span>       <span class="o">=</span> <span class="s1">&#39;all2all&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">outputDistUnits</span>  <span class="o">=</span> <span class="s1">&#39;meters&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">outputTimeUnits</span>  <span class="o">=</span> <span class="s1">&#39;seconds&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">routeType</span>        <span class="o">=</span> <span class="s1">&#39;fastest&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">speedMPS</span>         <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">dataProvider</span>     <span class="o">=</span> <span class="s1">&#39;ORS-online&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">dataProviderArgs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;APIkey&#39;</span> <span class="p">:</span> <span class="n">ORS_API_KEY</span><span class="p">})</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Make our car wait for 65 seconds before starting:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assignmentsDF</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">addStaticAssignment</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">odID</span>         <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">objectID</span>     <span class="o">=</span> <span class="s1">&#39;Blue Car&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">modelFile</span>    <span class="o">=</span> <span class="s1">&#39;veroviz/models/car_blue.gltf&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">loc</span>          <span class="o">=</span> <span class="p">[</span><span class="n">exampleNodes</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">exampleNodes</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">][</span><span class="s1">&#39;lat&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>                    <span class="n">exampleNodes</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">exampleNodes</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">][</span><span class="s1">&#39;lon&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
<span class="gp">... </span>    <span class="n">startTimeSec</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">endTimeSec</span>   <span class="o">=</span> <span class="mf">65.0</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># This example includes all of the available input arguments:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">newAssignmentsDF</span> <span class="o">=</span> <span class="n">vrv</span><span class="o">.</span><span class="n">createAssignmentsFromNodeSeq2D</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">initAssignments</span>  <span class="o">=</span> <span class="n">assignmentsDF</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">nodeSeq</span>          <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">nodes</span>            <span class="o">=</span> <span class="n">exampleNodes</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">serviceTimeSec</span>   <span class="o">=</span> <span class="mf">20.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">odID</span>             <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">objectID</span>         <span class="o">=</span> <span class="s1">&#39;Blue Car&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">modelFile</span>        <span class="o">=</span> <span class="s1">&#39;veroviz/models/car_blue.gltf&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">modelScale</span>       <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">modelMinPxSize</span>   <span class="o">=</span> <span class="mi">75</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">startTimeSec</span>     <span class="o">=</span> <span class="mf">65.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">expDurationArgs</span>  <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;timeSecDict&#39;</span><span class="p">:</span> <span class="n">timeSec</span><span class="p">},</span>
<span class="gp">... </span>    <span class="n">routeType</span>        <span class="o">=</span> <span class="s1">&#39;fastest&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">speedMPS</span>         <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">leafletColor</span>     <span class="o">=</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">leafletWeight</span>    <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">leafletStyle</span>     <span class="o">=</span> <span class="s1">&#39;dashed&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">leafletOpacity</span>   <span class="o">=</span> <span class="mf">0.8</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">useArrows</span>        <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">cesiumColor</span>      <span class="o">=</span> <span class="s1">&#39;Cesium.Color.BLUE&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">cesiumWeight</span>     <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">cesiumStyle</span>      <span class="o">=</span> <span class="s1">&#39;solid&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">cesiumOpacity</span>    <span class="o">=</span> <span class="mf">0.8</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">dataProvider</span>     <span class="o">=</span> <span class="s1">&#39;ORS-online&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">dataProviderArgs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;APIkey&#39;</span> <span class="p">:</span> <span class="n">ORS_API_KEY</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">newAssignmentsDF</span>
</pre></div>
</div>
</dd>
<dt>View the assignments in Leaflet:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">vrv</span><span class="o">.</span><span class="n">createLeaflet</span><span class="p">(</span><span class="n">arcs</span><span class="o">=</span><span class="n">newAssignmentsDF</span><span class="p">,</span> <span class="n">nodes</span><span class="o">=</span><span class="n">exampleNodes</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>View the assignments in Cesium:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">vrv</span><span class="o">.</span><span class="n">createCesium</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">assignments</span> <span class="o">=</span> <span class="n">newAssignmentsDF</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">nodes</span>       <span class="o">=</span> <span class="n">exampleNodes</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">startTime</span>   <span class="o">=</span> <span class="s1">&#39;08:00:00&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">cesiumDir</span>   <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;CESIUMDIR&#39;</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">problemDir</span>  <span class="o">=</span> <span class="s1">&#39;createAssignments_example&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="veroviz.createCesium.html" title="veroviz.createCesium module"
             >next</a> |</li>
        <li class="right" >
          <a href="modules.html" title="modules"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">veroviz 0.3.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="modules.html" >modules</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, optimatorlab.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.1.2.
    </div>
  </body>
</html>